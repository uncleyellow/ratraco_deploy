"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[267],{8267:(wi,Ot,d)=>{d.r(Ot),d.d(Ot,{ScrumboardModule:()=>Lt});var P=d(1390),i=d(4650),v=d(6895),q=d(7376),I=d(3353),g=d(1281),Zt=d(2687),p=d(7579),K=d(727),be=d(4986),ve=d(5963),xe=d(6406),Ft=d(9751),at=d(6451),T=d(2722),lt=d(8675),b=d(4004),y=d(5698),w=d(8505),S=d(3900),Mt=d(445);function ct(r,e,t){for(let s in e)if(e.hasOwnProperty(s)){const n=e[s];n?r.setProperty(s,n,t?.has(s)?"important":""):r.removeProperty(s)}return r}function M(r,e){const t=e?"":"none";ct(r.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function Bt(r,e,t){ct(r.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function et(r,e){return e&&"none"!=e?r+" "+e:r}function Ut(r){const e=r.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(r)*e}function dt(r,e){return r.getPropertyValue(e).split(",").map(s=>s.trim())}function ht(r){const e=r.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function ut(r,e,t){const{top:s,bottom:n,left:o,right:a}=r;return t>=s&&t<=n&&e>=o&&e<=a}function j(r,e,t){r.top+=e,r.bottom=r.top+r.height,r.left+=t,r.right=r.left+r.width}function Nt(r,e,t,s){const{top:n,right:o,bottom:a,left:l,width:c,height:h}=r,u=c*e,_=h*e;return s>n-_&&s<a+_&&t>l-u&&t<o+u}class Jt{constructor(e){this._document=e,this.positions=new Map}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:ht(t)})})}handleScroll(e){const t=(0,I.sA)(e),s=this.positions.get(t);if(!s)return null;const n=s.scrollPosition;let o,a;if(t===this._document){const h=this.getViewportScrollPosition();o=h.top,a=h.left}else o=t.scrollTop,a=t.scrollLeft;const l=n.top-o,c=n.left-a;return this.positions.forEach((h,u)=>{h.clientRect&&t!==u&&t.contains(u)&&j(h.clientRect,l,c)}),n.top=o,n.left=a,{top:l,left:c}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function zt(r){const e=r.cloneNode(!0),t=e.querySelectorAll("[id]"),s=r.nodeName.toLowerCase();e.removeAttribute("id");for(let n=0;n<t.length;n++)t[n].removeAttribute("id");return"canvas"===s?Gt(r,e):("input"===s||"select"===s||"textarea"===s)&&Ht(r,e),Qt("canvas",r,e,Gt),Qt("input, textarea, select",r,e,Ht),e}function Qt(r,e,t,s){const n=e.querySelectorAll(r);if(n.length){const o=t.querySelectorAll(r);for(let a=0;a<n.length;a++)s(n[a],o[a])}}let we=0;function Ht(r,e){"file"!==e.type&&(e.value=r.value),"radio"===e.type&&e.name&&(e.name=`mat-clone-${e.name}-${we++}`)}function Gt(r,e){const t=e.getContext("2d");if(t)try{t.drawImage(r,0,0)}catch{}}const Vt=(0,I.i$)({passive:!0}),it=(0,I.i$)({passive:!1}),pt=new Set(["position"]);class Ce{get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(e){const t=(0,g.Ig)(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(s=>M(s,t)))}constructor(e,t,s,n,o,a){this._config=t,this._document=s,this._ngZone=n,this._viewportRuler=o,this._dragDropRegistry=a,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new p.x,this._pointerMoveSubscription=K.w0.EMPTY,this._pointerUpSubscription=K.w0.EMPTY,this._scrollSubscription=K.w0.EMPTY,this._resizeSubscription=K.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new p.x,this.started=new p.x,this.released=new p.x,this.ended=new p.x,this.entered=new p.x,this.exited=new p.x,this.dropped=new p.x,this.moved=this._moveEvents,this._pointerDown=l=>{if(this.beforeStarted.next(),this._handles.length){const c=this._getTargetHandle(l);c&&!this._disabledHandles.has(c)&&!this.disabled&&this._initializeDragSequence(c,l)}else this.disabled||this._initializeDragSequence(this._rootElement,l)},this._pointerMove=l=>{const c=this._getPointerPositionOnPage(l);if(!this._hasStartedDragging){if(Math.abs(c.x-this._pickupPositionOnPage.x)+Math.abs(c.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const Z=Date.now()>=this._dragStartTime+this._getDragStartDelay(l),F=this._dropContainer;if(!Z)return void this._endDragSequence(l);(!F||!F.isDragging()&&!F.isReceiving())&&(l.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(l)))}return}l.preventDefault();const h=this._getConstrainedPointerPosition(c);if(this._hasMoved=!0,this._lastKnownPointerPosition=c,this._updatePointerDirectionDelta(h),this._dropContainer)this._updateActiveDropContainer(h,c);else{const u=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,_=this._activeTransform;_.x=h.x-u.x+this._passiveTransform.x,_.y=h.y-u.y+this._passiveTransform.y,this._applyRootElementTransform(_.x,_.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:h,event:l,distance:this._getDragDistance(h),delta:this._pointerDirectionDelta})})},this._pointerUp=l=>{this._endDragSequence(l)},this._nativeDragStart=l=>{if(this._handles.length){const c=this._getTargetHandle(l);c&&!this._disabledHandles.has(c)&&!this.disabled&&l.preventDefault()}else this.disabled||l.preventDefault()},this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new Jt(s),a.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(s=>(0,g.fI)(s)),this._handles.forEach(s=>M(s,this.disabled)),this._toggleNativeDragInteractions();const t=new Set;return this._disabledHandles.forEach(s=>{this._handles.indexOf(s)>-1&&t.add(s)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){const t=(0,g.fI)(e);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,it),t.addEventListener("touchstart",this._pointerDown,Vt),t.addEventListener("dragstart",this._nativeDragStart,it)}),this._initialTransform=void 0,this._rootElement=t),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?(0,g.fI)(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),M(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),M(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){const e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){const e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){W(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const t=this._dropContainer;if(t){const s=this._rootElement,n=s.parentNode,o=this._placeholder=this._createPlaceholderElement(),a=this._anchor=this._anchor||this._document.createComment(""),l=this._getShadowRoot();n.insertBefore(a,s),this._initialTransform=s.style.transform||"",this._preview=this._createPreviewElement(),Bt(s,!1,pt),this._document.body.appendChild(n.replaceChild(o,s)),this._getPreviewInsertionPoint(n,l).appendChild(this._preview),this.started.next({source:this,event:e}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();const s=this.isDragging(),n=W(t),o=!n&&0!==t.button,a=this._rootElement,l=(0,I.sA)(t),c=!n&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),h=n?(0,Zt.yG)(t):(0,Zt.X6)(t);if(l&&l.draggable&&"mousedown"===t.type&&t.preventDefault(),s||o||c||h)return;if(this._handles.length){const D=a.style;this._rootElementTapHighlight=D.webkitTapHighlightColor||"",D.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(D=>this._updateOnScroll(D)),this._boundaryElement&&(this._boundaryRect=ht(this._boundaryElement));const u=this._previewTemplate;this._pickupPositionInElement=u&&u.template&&!u.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,e,t);const _=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:_.x,y:_.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){Bt(this._rootElement,!0,pt),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const t=this._dropContainer,s=t.getItemIndex(this),n=this._getPointerPositionOnPage(e),o=this._getDragDistance(n),a=t._isOverContainer(n.x,n.y);this.ended.next({source:this,distance:o,dropPoint:n,event:e}),this.dropped.next({item:this,currentIndex:s,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:a,distance:o,dropPoint:n,event:e}),t.drop(this,s,this._initialIndex,this._initialContainer,a,o,n,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:s,y:n}){let o=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=o,this._dropContainer.enter(this,e,t,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(s,n),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_createPreviewElement(){const e=this._previewTemplate,t=this.previewClass,s=e?e.template:null;let n;if(s&&e){const o=e.matchSize?this._initialClientRect:null,a=e.viewContainer.createEmbeddedView(s,e.context);a.detectChanges(),n=$t(a,this._document),this._previewRef=a,e.matchSize?qt(n,o):n.style.transform=st(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else n=zt(this._rootElement),qt(n,this._initialClientRect),this._initialTransform&&(n.style.transform=this._initialTransform);return ct(n.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},pt),M(n,!1),n.classList.add("cdk-drag-preview"),n.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(o=>n.classList.add(o)):n.classList.add(t)),n}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);const t=function ye(r){const e=getComputedStyle(r),t=dt(e,"transition-property"),s=t.find(l=>"transform"===l||"all"===l);if(!s)return 0;const n=t.indexOf(s),o=dt(e,"transition-duration"),a=dt(e,"transition-delay");return Ut(o[n])+Ut(a[n])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(s=>{const n=a=>{(!a||(0,I.sA)(a)===this._preview&&"transform"===a.propertyName)&&(this._preview?.removeEventListener("transitionend",n),s(),clearTimeout(o))},o=setTimeout(n,1.5*t);this._preview.addEventListener("transitionend",n)}))}_createPlaceholderElement(){const e=this._placeholderTemplate,t=e?e.template:null;let s;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),s=$t(this._placeholderRef,this._document)):s=zt(this._rootElement),s.style.pointerEvents="none",s.classList.add("cdk-drag-placeholder"),s}_getPointerPositionInElement(e,t,s){const n=t===this._rootElement?null:t,o=n?n.getBoundingClientRect():e,a=W(s)?s.targetTouches[0]:s,l=this._getViewportScrollPosition();return{x:o.left-e.left+(a.pageX-o.left-l.left),y:o.top-e.top+(a.pageY-o.top-l.top)}}_getPointerPositionOnPage(e){const t=this._getViewportScrollPosition(),s=W(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,n=s.pageX-t.left,o=s.pageY-t.top;if(this._ownerSVGElement){const a=this._ownerSVGElement.getScreenCTM();if(a){const l=this._ownerSVGElement.createSVGPoint();return l.x=n,l.y=o,l.matrixTransform(a.inverse())}}return{x:n,y:o}}_getConstrainedPointerPosition(e){const t=this._dropContainer?this._dropContainer.lockAxis:null;let{x:s,y:n}=this.constrainPosition?this.constrainPosition(e,this,this._initialClientRect,this._pickupPositionInElement):e;if("x"===this.lockAxis||"x"===t?n=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===t)&&(s=this._pickupPositionOnPage.x),this._boundaryRect){const{x:o,y:a}=this._pickupPositionInElement,l=this._boundaryRect,{width:c,height:h}=this._getPreviewRect(),u=l.top+a,_=l.bottom-(h-a);s=Yt(s,l.left+o,l.right-(c-o)),n=Yt(n,u,_)}return{x:s,y:n}}_updatePointerDirectionDelta(e){const{x:t,y:s}=e,n=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,a=Math.abs(t-o.x),l=Math.abs(s-o.y);return a>this._config.pointerDirectionChangeThreshold&&(n.x=t>o.x?1:-1,o.x=t),l>this._config.pointerDirectionChangeThreshold&&(n.y=s>o.y?1:-1,o.y=s),n}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,M(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,it),e.removeEventListener("touchstart",this._pointerDown,Vt),e.removeEventListener("dragstart",this._nativeDragStart,it)}_applyRootElementTransform(e,t){const s=st(e,t),n=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=n.transform&&"none"!=n.transform?n.transform:""),n.transform=et(s,this._initialTransform)}_applyPreviewTransform(e,t){const s=this._previewTemplate?.template?void 0:this._initialTransform,n=st(e,t);this._preview.style.transform=et(n,s)}_getDragDistance(e){const t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(0===e&&0===t||this.isDragging()||!this._boundaryElement)return;const s=this._rootElement.getBoundingClientRect(),n=this._boundaryElement.getBoundingClientRect();if(0===n.width&&0===n.height||0===s.width&&0===s.height)return;const o=n.left-s.left,a=s.right-n.right,l=n.top-s.top,c=s.bottom-n.bottom;n.width>s.width?(o>0&&(e+=o),a>0&&(e-=a)):e=0,n.height>s.height?(l>0&&(t+=l),c>0&&(t-=c)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){const t=this.dragStartDelay;return"number"==typeof t?t:W(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){const t=this._parentPositions.handleScroll(e);if(t){const s=(0,I.sA)(e);this._boundaryRect&&s!==this._boundaryElement&&s.contains(this._boundaryElement)&&j(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,I.kV)(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){const s=this._previewContainer||"global";if("parent"===s)return e;if("global"===s){const n=this._document;return t||n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement||n.body}return(0,g.fI)(s)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}}function st(r,e){return`translate3d(${Math.round(r)}px, ${Math.round(e)}px, 0)`}function Yt(r,e,t){return Math.max(e,Math.min(t,r))}function W(r){return"t"===r.type[0]}function $t(r,e){const t=r.rootNodes;if(1===t.length&&t[0].nodeType===e.ELEMENT_NODE)return t[0];const s=e.createElement("div");return t.forEach(n=>s.appendChild(n)),s}function qt(r,e){r.style.width=`${e.width}px`,r.style.height=`${e.height}px`,r.style.transform=st(e.left,e.top)}function gt(r,e,t){const s=X(e,r.length-1),n=X(t,r.length-1);if(s===n)return;const o=r[s],a=n<s?-1:1;for(let l=s;l!==n;l+=a)r[l]=r[l+a];r[n]=o}function X(r,e){return Math.max(0,Math.min(e,r))}class Te{constructor(e,t){this._element=e,this._dragDropRegistry=t,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(e){this.withItems(e)}sort(e,t,s,n){const o=this._itemPositions,a=this._getItemIndexFromPointerPosition(e,t,s,n);if(-1===a&&o.length>0)return null;const l="horizontal"===this.orientation,c=o.findIndex(x=>x.drag===e),h=o[a],_=h.clientRect,D=c>a?1:-1,Z=this._getItemOffsetPx(o[c].clientRect,_,D),F=this._getSiblingOffsetPx(c,o,D),$=o.slice();return gt(o,c,a),o.forEach((x,yi)=>{if($[yi]===x)return;const me=x.drag===e,At=me?Z:F,_e=me?e.getPlaceholderElement():x.drag.getRootElement();x.offset+=At,l?(_e.style.transform=et(`translate3d(${Math.round(x.offset)}px, 0, 0)`,x.initialTransform),j(x.clientRect,0,At)):(_e.style.transform=et(`translate3d(0, ${Math.round(x.offset)}px, 0)`,x.initialTransform),j(x.clientRect,At,0))}),this._previousSwap.overlaps=ut(_,t,s),this._previousSwap.drag=h.drag,this._previousSwap.delta=l?n.x:n.y,{previousIndex:c,currentIndex:a}}enter(e,t,s,n){const o=null==n||n<0?this._getItemIndexFromPointerPosition(e,t,s):n,a=this._activeDraggables,l=a.indexOf(e),c=e.getPlaceholderElement();let h=a[o];if(h===e&&(h=a[o+1]),!h&&(null==o||-1===o||o<a.length-1)&&this._shouldEnterAsFirstChild(t,s)&&(h=a[0]),l>-1&&a.splice(l,1),h&&!this._dragDropRegistry.isDragging(h)){const u=h.getRootElement();u.parentElement.insertBefore(c,u),a.splice(o,0,e)}else(0,g.fI)(this._element).appendChild(c),a.push(e);c.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables.forEach(e=>{const t=e.getRootElement();if(t){const s=this._itemPositions.find(n=>n.drag===e)?.initialTransform;t.style.transform=s||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(s=>s.drag===e)}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:s})=>{j(s,e,t)}),this._itemPositions.forEach(({drag:s})=>{this._dragDropRegistry.isDragging(s)&&s._sortFromLastPointerPosition()})}_cacheItemPositions(){const e="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(t=>{const s=t.getVisibleElement();return{drag:t,offset:0,initialTransform:s.style.transform||"",clientRect:ht(s)}}).sort((t,s)=>e?t.clientRect.left-s.clientRect.left:t.clientRect.top-s.clientRect.top)}_getItemOffsetPx(e,t,s){const n="horizontal"===this.orientation;let o=n?t.left-e.left:t.top-e.top;return-1===s&&(o+=n?t.width-e.width:t.height-e.height),o}_getSiblingOffsetPx(e,t,s){const n="horizontal"===this.orientation,o=t[e].clientRect,a=t[e+-1*s];let l=o[n?"width":"height"]*s;if(a){const c=n?"left":"top",h=n?"right":"bottom";-1===s?l-=a.clientRect[c]-o[h]:l+=o[c]-a.clientRect[h]}return l}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;const s=this._itemPositions,n="horizontal"===this.orientation;if(s[0].drag!==this._activeDraggables[0]){const a=s[s.length-1].clientRect;return n?e>=a.right:t>=a.bottom}{const a=s[0].clientRect;return n?e<=a.left:t<=a.top}}_getItemIndexFromPointerPosition(e,t,s,n){const o="horizontal"===this.orientation,a=this._itemPositions.findIndex(({drag:l,clientRect:c})=>l!==e&&((!n||l!==this._previousSwap.drag||!this._previousSwap.overlaps||(o?n.x:n.y)!==this._previousSwap.delta)&&(o?t>=Math.floor(c.left)&&t<Math.floor(c.right):s>=Math.floor(c.top)&&s<Math.floor(c.bottom))));return-1!==a&&this._sortPredicate(a,e)?a:-1}}class Pe{constructor(e,t,s,n,o){this._dragDropRegistry=t,this._ngZone=n,this._viewportRuler=o,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new p.x,this.entered=new p.x,this.exited=new p.x,this.dropped=new p.x,this.sorted=new p.x,this.receivingStarted=new p.x,this.receivingStopped=new p.x,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=K.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new p.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function De(r=0,e=be.z){return r<0&&(r=0),(0,ve.H)(r,r,e)}(0,xe.Z).pipe((0,T.R)(this._stopScrollTimers)).subscribe(()=>{const a=this._scrollNode,l=this.autoScrollStep;1===this._verticalScrollDirection?a.scrollBy(0,-l):2===this._verticalScrollDirection&&a.scrollBy(0,l),1===this._horizontalScrollDirection?a.scrollBy(-l,0):2===this._horizontalScrollDirection&&a.scrollBy(l,0)})},this.element=(0,g.fI)(e),this._document=s,this.withScrollableParents([this.element]),t.registerDropContainer(this),this._parentPositions=new Jt(s),this._sortStrategy=new Te(this.element,t),this._sortStrategy.withSortPredicate((a,l)=>this.sortPredicate(a,l,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,s,n){this._draggingStarted(),null==n&&this.sortingDisabled&&(n=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,s,n),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,s,n,o,a,l,c={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:s,container:this,previousContainer:n,isPointerOverContainer:o,distance:a,dropPoint:l,event:c})}withItems(e){const t=this._draggables;return this._draggables=e,e.forEach(s=>s._withDropContainer(this)),this.isDragging()&&(t.filter(n=>n.isDragging()).every(n=>-1===e.indexOf(n))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._sortStrategy.direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._sortStrategy.orientation=e,this}withScrollableParents(e){const t=(0,g.fI)(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t,...e]:e.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,s,n){if(this.sortingDisabled||!this._clientRect||!Nt(this._clientRect,.05,t,s))return;const o=this._sortStrategy.sort(e,t,s,n);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let s,n=0,o=0;if(this._parentPositions.positions.forEach((a,l)=>{l===this._document||!a.clientRect||s||Nt(a.clientRect,.05,e,t)&&([n,o]=function ke(r,e,t,s){const n=Wt(e,s),o=Xt(e,t);let a=0,l=0;if(n){const c=r.scrollTop;1===n?c>0&&(a=1):r.scrollHeight-c>r.clientHeight&&(a=2)}if(o){const c=r.scrollLeft;1===o?c>0&&(l=1):r.scrollWidth-c>r.clientWidth&&(l=2)}return[a,l]}(l,a.clientRect,e,t),(n||o)&&(s=l))}),!n&&!o){const{width:a,height:l}=this._viewportRuler.getViewportSize(),c={width:a,height:l,top:0,right:a,bottom:l,left:0};n=Wt(c,t),o=Xt(c,e),s=window}s&&(n!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||s!==this._scrollNode)&&(this._verticalScrollDirection=n,this._horizontalScrollDirection=o,this._scrollNode=s,(n||o)&&s?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const e=(0,g.fI)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const e=(0,g.fI)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}_reset(){this._isDragging=!1;const e=(0,g.fI)(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(e,t){return null!=this._clientRect&&ut(this._clientRect,e,t)}_getSiblingContainerFromPosition(e,t,s){return this._siblings.find(n=>n._canReceive(e,t,s))}_canReceive(e,t,s){if(!this._clientRect||!ut(this._clientRect,t,s)||!this.enterPredicate(e,this))return!1;const n=this._getShadowRoot().elementFromPoint(t,s);if(!n)return!1;const o=(0,g.fI)(this.element);return n===o||o.contains(n)}_startReceiving(e,t){const s=this._activeSiblings;!s.has(e)&&t.every(n=>this.enterPredicate(n,this)||this._draggables.indexOf(n)>-1)&&(s.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:t}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){const t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const e=(0,I.kV)((0,g.fI)(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}}function Wt(r,e){const{top:t,bottom:s,height:n}=r,o=.05*n;return e>=t-o&&e<=t+o?1:e>=s-o&&e<=s+o?2:0}function Xt(r,e){const{left:t,right:s,width:n}=r,o=.05*n;return e>=t-o&&e<=t+o?1:e>=s-o&&e<=s+o?2:0}const nt=(0,I.i$)({passive:!1,capture:!0});let Re=(()=>{class r{constructor(t,s){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=n=>n.isDragging(),this.pointerMove=new p.x,this.pointerUp=new p.x,this.scroll=new p.x,this._preventDefaultWhileDragging=n=>{this._activeDragInstances.length>0&&n.preventDefault()},this._persistentTouchmoveListener=n=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&n.preventDefault(),this.pointerMove.next(n))},this._document=s}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,nt)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,nt)}startDragging(t,s){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){const n=s.type.startsWith("touch");this._globalListeners.set(n?"touchend":"mouseup",{handler:o=>this.pointerUp.next(o),options:!0}).set("scroll",{handler:o=>this.scroll.next(o),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:nt}),n||this._globalListeners.set("mousemove",{handler:o=>this.pointerMove.next(o),options:nt}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((o,a)=>{this._document.addEventListener(a,o.handler,o.options)})})}}stopDragging(t){const s=this._activeDragInstances.indexOf(t);s>-1&&(this._activeDragInstances.splice(s,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}scrolled(t){const s=[this.scroll];return t&&t!==this._document&&s.push(new Ft.y(n=>this._ngZone.runOutsideAngular(()=>{const a=l=>{this._activeDragInstances.length&&n.next(l)};return t.addEventListener("scroll",a,!0),()=>{t.removeEventListener("scroll",a,!0)}}))),(0,at.T)(...s)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,s)=>{this._document.removeEventListener(s,t.handler,t.options)}),this._globalListeners.clear()}}return r.\u0275fac=function(t){return new(t||r)(i.LFG(i.R0b),i.LFG(v.K0))},r.\u0275prov=i.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Ee={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let ft=(()=>{class r{constructor(t,s,n,o){this._document=t,this._ngZone=s,this._viewportRuler=n,this._dragDropRegistry=o}createDrag(t,s=Ee){return new Ce(t,s,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new Pe(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return r.\u0275fac=function(t){return new(t||r)(i.LFG(v.K0),i.LFG(i.R0b),i.LFG(q.rL),i.LFG(Re))},r.\u0275prov=i.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const mt=new i.OlP("CDK_DRAG_PARENT"),_t=new i.OlP("CdkDropListGroup");let te=(()=>{class r{constructor(){this._items=new Set,this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=(0,g.Ig)(t)}ngOnDestroy(){this._items.clear()}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275dir=i.lG2({type:r,selectors:[["","cdkDropListGroup",""]],inputs:{disabled:["cdkDropListGroupDisabled","disabled"]},exportAs:["cdkDropListGroup"],standalone:!0,features:[i._Bn([{provide:_t,useExisting:r}])]}),r})();const ee=new i.OlP("CDK_DRAG_CONFIG");let Le=0;const ie=new i.OlP("CdkDropList");let se=(()=>{class r{get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(t){this._dropListRef.disabled=this._disabled=(0,g.Ig)(t)}constructor(t,s,n,o,a,l,c){this.element=t,this._changeDetectorRef=n,this._scrollDispatcher=o,this._dir=a,this._group=l,this._destroyed=new p.x,this.connectedTo=[],this.id="cdk-drop-list-"+Le++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new i.vpe,this.entered=new i.vpe,this.exited=new i.vpe,this.sorted=new i.vpe,this._unsortedItems=new Set,this._dropListRef=s.createDropList(t),this._dropListRef.data=this,c&&this._assignDefaults(c),this._dropListRef.enterPredicate=(h,u)=>this.enterPredicate(h.data,u.data),this._dropListRef.sortPredicate=(h,u,_)=>this.sortPredicate(h,u.data,_.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),r._dropLists.push(this),l&&l._items.add(this)}addItem(t){this._unsortedItems.add(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(t){this._unsortedItems.delete(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((t,s)=>t._dragRef.getVisibleElement().compareDocumentPosition(s._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const t=r._dropLists.indexOf(this);t>-1&&r._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(t){this._dir&&this._dir.change.pipe((0,lt.O)(this._dir.value),(0,T.R)(this._destroyed)).subscribe(s=>t.withDirection(s)),t.beforeStarted.subscribe(()=>{const s=(0,g.Eq)(this.connectedTo).map(n=>"string"==typeof n?r._dropLists.find(a=>a.id===n):n);if(this._group&&this._group._items.forEach(n=>{-1===s.indexOf(n)&&s.push(n)}),!this._scrollableParentsResolved){const n=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(o=>o.getElementRef().nativeElement);this._dropListRef.withScrollableParents(n),this._scrollableParentsResolved=!0}t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.sortingDisabled=(0,g.Ig)(this.sortingDisabled),t.autoScrollDisabled=(0,g.Ig)(this.autoScrollDisabled),t.autoScrollStep=(0,g.su)(this.autoScrollStep,2),t.connectedTo(s.filter(n=>n&&n!==this).map(n=>n._dropListRef)).withOrientation(this.orientation)})}_handleEvents(t){t.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(s=>{this.entered.emit({container:this,item:s.item.data,currentIndex:s.currentIndex})}),t.exited.subscribe(s=>{this.exited.emit({container:this,item:s.item.data}),this._changeDetectorRef.markForCheck()}),t.sorted.subscribe(s=>{this.sorted.emit({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:s.item.data})}),t.dropped.subscribe(s=>{this.dropped.emit({previousIndex:s.previousIndex,currentIndex:s.currentIndex,previousContainer:s.previousContainer.data,container:s.container.data,item:s.item.data,isPointerOverContainer:s.isPointerOverContainer,distance:s.distance,dropPoint:s.dropPoint,event:s.event}),this._changeDetectorRef.markForCheck()}),(0,at.T)(t.receivingStarted,t.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(t){const{lockAxis:s,draggingDisabled:n,sortingDisabled:o,listAutoScrollDisabled:a,listOrientation:l}=t;this.disabled=n??!1,this.sortingDisabled=o??!1,this.autoScrollDisabled=a??!1,this.orientation=l||"vertical",s&&(this.lockAxis=s)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(t=>t._dragRef))}}return r._dropLists=[],r.\u0275fac=function(t){return new(t||r)(i.Y36(i.SBq),i.Y36(ft),i.Y36(i.sBO),i.Y36(q.mF),i.Y36(Mt.Is,8),i.Y36(_t,12),i.Y36(ee,8))},r.\u0275dir=i.lG2({type:r,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(t,s){2&t&&(i.uIk("id",s.id),i.ekj("cdk-drop-list-disabled",s.disabled)("cdk-drop-list-dragging",s._dropListRef.isDragging())("cdk-drop-list-receiving",s._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],standalone:!0,features:[i._Bn([{provide:_t,useValue:void 0},{provide:ie,useExisting:r}])]}),r})();const bt=new i.OlP("CdkDragHandle");let ne=(()=>{class r{get disabled(){return this._disabled}set disabled(t){this._disabled=(0,g.Ig)(t),this._stateChanges.next(this)}constructor(t,s){this.element=t,this._stateChanges=new p.x,this._disabled=!1,this._parentDrag=s}ngOnDestroy(){this._stateChanges.complete()}}return r.\u0275fac=function(t){return new(t||r)(i.Y36(i.SBq),i.Y36(mt,12))},r.\u0275dir=i.lG2({type:r,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:["cdkDragHandleDisabled","disabled"]},standalone:!0,features:[i._Bn([{provide:bt,useExisting:r}])]}),r})();const re=new i.OlP("CdkDragPlaceholder"),oe=new i.OlP("CdkDragPreview");let ae=(()=>{class r{get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(t){this._disabled=(0,g.Ig)(t),this._dragRef.disabled=this._disabled}constructor(t,s,n,o,a,l,c,h,u,_,D){this.element=t,this.dropContainer=s,this._ngZone=o,this._viewContainerRef=a,this._dir=c,this._changeDetectorRef=u,this._selfHandle=_,this._parentDrag=D,this._destroyed=new p.x,this.started=new i.vpe,this.released=new i.vpe,this.ended=new i.vpe,this.entered=new i.vpe,this.exited=new i.vpe,this.dropped=new i.vpe,this.moved=new Ft.y(Z=>{const F=this._dragRef.moved.pipe((0,b.U)($=>({source:this,pointerPosition:$.pointerPosition,event:$.event,delta:$.delta,distance:$.distance}))).subscribe(Z);return()=>{F.unsubscribe()}}),this._dragRef=h.createDrag(t,{dragStartThreshold:l&&null!=l.dragStartThreshold?l.dragStartThreshold:5,pointerDirectionChangeThreshold:l&&null!=l.pointerDirectionChangeThreshold?l.pointerDirectionChangeThreshold:5,zIndex:l?.zIndex}),this._dragRef.data=this,r._dragInstances.push(this),l&&this._assignDefaults(l),s&&(this._dragRef._withDropContainer(s._dropListRef),s.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,y.q)(1),(0,T.R)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(t){const s=t.rootElementSelector,n=t.freeDragPosition;s&&!s.firstChange&&this._updateRootElement(),n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const t=r._dragInstances.indexOf(this);t>-1&&r._dragInstances.splice(t,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const t=this.element.nativeElement;let s=t;this.rootElementSelector&&(s=void 0!==t.closest?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(s||t)}_getBoundaryElement(){const t=this.boundaryElement;return t?"string"==typeof t?this.element.nativeElement.closest(t):(0,g.fI)(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){const s=this._dir,n=this.dragStartDelay,o=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,a=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.dragStartDelay="object"==typeof n&&n?n:(0,g.su)(n),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(a).withPreviewContainer(this.previewContainer||"global"),s&&t.withDirection(s.value)}}),t.beforeStarted.pipe((0,y.q)(1)).subscribe(()=>{if(this._parentDrag)return void t.withParent(this._parentDrag._dragRef);let s=this.element.nativeElement.parentElement;for(;s;){if(s.classList.contains("cdk-drag")){t.withParent(r._dragInstances.find(n=>n.element.nativeElement===s)?._dragRef||null);break}s=s.parentElement}})}_handleEvents(t){t.started.subscribe(s=>{this.started.emit({source:this,event:s.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(s=>{this.released.emit({source:this,event:s.event})}),t.ended.subscribe(s=>{this.ended.emit({source:this,distance:s.distance,dropPoint:s.dropPoint,event:s.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(s=>{this.entered.emit({container:s.container.data,item:this,currentIndex:s.currentIndex})}),t.exited.subscribe(s=>{this.exited.emit({container:s.container.data,item:this})}),t.dropped.subscribe(s=>{this.dropped.emit({previousIndex:s.previousIndex,currentIndex:s.currentIndex,previousContainer:s.previousContainer.data,container:s.container.data,isPointerOverContainer:s.isPointerOverContainer,item:this,distance:s.distance,dropPoint:s.dropPoint,event:s.event})})}_assignDefaults(t){const{lockAxis:s,dragStartDelay:n,constrainPosition:o,previewClass:a,boundaryElement:l,draggingDisabled:c,rootElementSelector:h,previewContainer:u}=t;this.disabled=c??!1,this.dragStartDelay=n||0,s&&(this.lockAxis=s),o&&(this.constrainPosition=o),a&&(this.previewClass=a),l&&(this.boundaryElement=l),h&&(this.rootElementSelector=h),u&&(this.previewContainer=u)}_setupHandlesListener(){this._handles.changes.pipe((0,lt.O)(this._handles),(0,w.b)(t=>{const s=t.filter(n=>n._parentDrag===this).map(n=>n.element);this._selfHandle&&this.rootElementSelector&&s.push(this.element),this._dragRef.withHandles(s)}),(0,S.w)(t=>(0,at.T)(...t.map(s=>s._stateChanges.pipe((0,lt.O)(s))))),(0,T.R)(this._destroyed)).subscribe(t=>{const s=this._dragRef,n=t.element.nativeElement;t.disabled?s.disableHandle(n):s.enableHandle(n)})}}return r._dragInstances=[],r.\u0275fac=function(t){return new(t||r)(i.Y36(i.SBq),i.Y36(ie,12),i.Y36(v.K0),i.Y36(i.R0b),i.Y36(i.s_b),i.Y36(ee,8),i.Y36(Mt.Is,8),i.Y36(ft),i.Y36(i.sBO),i.Y36(bt,10),i.Y36(mt,12))},r.\u0275dir=i.lG2({type:r,selectors:[["","cdkDrag",""]],contentQueries:function(t,s,n){if(1&t&&(i.Suo(n,oe,5),i.Suo(n,re,5),i.Suo(n,bt,5)),2&t){let o;i.iGM(o=i.CRH())&&(s._previewTemplate=o.first),i.iGM(o=i.CRH())&&(s._placeholderTemplate=o.first),i.iGM(o=i.CRH())&&(s._handles=o)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,s){2&t&&i.ekj("cdk-drag-disabled",s.disabled)("cdk-drag-dragging",s._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[i._Bn([{provide:mt,useExisting:r}]),i.TTD]}),r})(),Fe=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=i.oAB({type:r}),r.\u0275inj=i.cJS({providers:[ft],imports:[q.ZD]}),r})();var C=d(4859),le=d(6709),vt=d(5938),B=d(3238),U=d(9602),Dt=d(9549),N=d(7392),ce=d(284),f=d(1837);const de=new i.OlP("MAT_LUXON_DATE_ADAPTER_OPTIONS",{providedIn:"root",factory:function Me(){return{useUtc:!1,firstDayOfWeek:0}}});let Ue=(()=>{class r extends B._A{constructor(t,s){super(),this._useUTC=!!s?.useUtc,this._firstDayOfWeek=s?.firstDayOfWeek||0,this.setLocale(t||f.ou.local().locale)}getYear(t){return t.year}getMonth(t){return t.month-1}getDate(t){return t.day}getDayOfWeek(t){return t.weekday}getMonthNames(t){return f.kI.months(t,{locale:this.locale})}getDateNames(){const t=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return function Be(r,e){const t=Array(r);for(let s=0;s<r;s++)t[s]=e(s);return t}(31,s=>t.format(f.ou.utc(2017,1,s+1).toJSDate()))}getDayOfWeekNames(t){const s=f.kI.weekdays(t,{locale:this.locale});return s.unshift(s.pop()),s}getYearName(t){return t.toFormat("yyyy")}getFirstDayOfWeek(){return this._firstDayOfWeek}getNumDaysInMonth(t){return t.daysInMonth}clone(t){return f.ou.fromObject(t.toObject())}createDate(t,s,n){if(s<0||s>11)throw Error(`Invalid month index "${s}". Month index has to be between 0 and 11.`);if(n<1)throw Error(`Invalid date "${n}". Date has to be greater than 0.`);const o=this._useUTC?f.ou.utc(t,s+1,n):f.ou.local(t,s+1,n);if(!this.isValid(o))throw Error(`Invalid date "${n}". Reason: "${o.invalidReason}".`);return o.setLocale(this.locale)}today(){return(this._useUTC?f.ou.utc():f.ou.local()).setLocale(this.locale)}parse(t,s){const n=this._getOptions();if("string"==typeof t&&t.length>0){const o=f.ou.fromISO(t,n);if(this.isValid(o))return o;const a=Array.isArray(s)?s:[s];if(!s.length)throw Error("Formats array must not be empty.");for(const l of a){const c=f.ou.fromFormat(t,l,n);if(this.isValid(c))return c}return this.invalid()}return"number"==typeof t?f.ou.fromMillis(t,n):t instanceof Date?f.ou.fromJSDate(t,n):t instanceof f.ou?f.ou.fromMillis(t.toMillis(),n):null}format(t,s){if(!this.isValid(t))throw Error("LuxonDateAdapter: Cannot format invalid date.");return t.setLocale(this.locale).setZone(this._useUTC?"utc":void 0).toFormat(s)}addCalendarYears(t,s){return t.plus({years:s}).setLocale(this.locale)}addCalendarMonths(t,s){return t.plus({months:s}).setLocale(this.locale)}addCalendarDays(t,s){return t.plus({days:s}).setLocale(this.locale)}toIso8601(t){return t.toISO()}deserialize(t){const s=this._getOptions();let n;if(t instanceof Date&&(n=f.ou.fromJSDate(t,s)),"string"==typeof t){if(!t)return null;n=f.ou.fromISO(t,s)}return n&&this.isValid(n)?n:super.deserialize(t)}isDateInstance(t){return t instanceof f.ou}isValid(t){return t.isValid}invalid(){return f.ou.invalid("Invalid Luxon DateTime object.")}_getOptions(){return{zone:this._useUTC?"utc":void 0,locale:this.locale}}}return r.\u0275fac=function(t){return new(t||r)(i.LFG(B.Ad,8),i.LFG(de,8))},r.\u0275prov=i.Yz7({token:r,factory:r.\u0275fac}),r})();const he={parse:{dateInput:"D"},display:{dateInput:"D",monthYearLabel:"LLL yyyy",dateA11yLabel:"DD",monthYearA11yLabel:"LLLL yyyy"}};let Ne=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=i.oAB({type:r}),r.\u0275inj=i.cJS({providers:[{provide:B._A,useClass:Ue,deps:[B.Ad,de]}]}),r})(),Je=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=i.oAB({type:r}),r.\u0275inj=i.cJS({providers:[{provide:B.sG,useValue:he}],imports:[Ne]}),r})();var rt=d(5655),ze=d(3162),Qe=d(4466),xt=d(1135),yt=d(2843),He=d(9646);class ue{constructor(e){this.id=e.id||null,this.title=e.title,this.description=e.description||null,this.icon=e.icon||null,this.lastActivity=e.lastActivity||null,this.lists=[],this.labels=[],this.members=[],e.lists&&(this.lists=e.lists.map(t=>t instanceof J?t:new J(t))),e.labels&&(this.labels=e.labels.map(t=>t instanceof ot?t:new ot(t))),e.members&&(this.members=e.members.map(t=>t instanceof pe?t:new pe(t)))}}class J{constructor(e){this.id=e.id||null,this.boardId=e.boardId,this.position=e.position,this.title=e.title,this.cards=[],e.cards&&(this.cards=e.cards.map(t=>t instanceof tt?t:new tt(t)))}}class tt{constructor(e){this.id=e.id||null,this.boardId=e.boardId,this.listId=e.listId,this.position=e.position,this.title=e.title,this.description=e.description||null,this.labels=[],this.dueDate=e.dueDate||null,e.labels&&(this.labels=e.labels.map(t=>t instanceof ot?t:new ot(t)))}}class pe{constructor(e){this.id=e.id||null,this.name=e.name,this.avatar=e.avatar||null}}class ot{constructor(e){this.id=e.id||null,this.boardId=e.boardId,this.title=e.title}}var Ge=d(529);const R=class{constructor(e){this._httpClient=e,this._board=new xt.X(null),this._boards=new xt.X(null),this._card=new xt.X(null)}get board$(){return this._board.asObservable()}get boards$(){return this._boards.asObservable()}get card$(){return this._card.asObservable()}getBoards(){return this._httpClient.get("api/apps/scrumboard/boards").pipe((0,b.U)(e=>e.map(t=>new ue(t))),(0,w.b)(e=>this._boards.next(e)))}getBoard(e){return this._httpClient.get("api/apps/scrumboard/board",{params:{id:e}}).pipe((0,b.U)(t=>new ue(t)),(0,w.b)(t=>this._board.next(t)))}createBoard(e){return this.boards$.pipe((0,y.q)(1),(0,S.w)(t=>this._httpClient.put("api/apps/scrumboard/board",{board:e}).pipe((0,b.U)(s=>(this._boards.next([...t,s]),s)))))}updateBoard(e,t){return this.boards$.pipe((0,y.q)(1),(0,S.w)(s=>this._httpClient.patch("api/apps/scrumboard/board",{id:e,board:t}).pipe((0,b.U)(n=>{const o=s.findIndex(a=>a.id===e);return s[o]=n,this._boards.next(s),n}))))}deleteBoard(e){return this.boards$.pipe((0,y.q)(1),(0,S.w)(t=>this._httpClient.delete("api/apps/scrumboard/board",{params:{id:e}}).pipe((0,b.U)(s=>{const n=t.findIndex(o=>o.id===e);return t.splice(n,1),this._boards.next(t),this._board.next(null),this._card.next(null),s}))))}createList(e){return this._httpClient.post("api/apps/scrumboard/board/list",{list:e}).pipe((0,b.U)(t=>new J(t)),(0,w.b)(t=>{const s=this._board.value;s.lists=[...s.lists,t],s.lists.sort((n,o)=>n.position-o.position),this._board.next(s)}))}updateList(e){return this._httpClient.patch("api/apps/scrumboard/board/list",{list:e}).pipe((0,b.U)(t=>new J(t)),(0,w.b)(t=>{const s=this._board.value,n=s.lists.findIndex(o=>o.id===e.id);s.lists[n]=t,s.lists.sort((o,a)=>o.position-a.position),this._board.next(s)}))}updateLists(e){return this._httpClient.patch("api/apps/scrumboard/board/lists",{lists:e}).pipe((0,b.U)(t=>t.map(s=>new J(s))),(0,w.b)(t=>{const s=this._board.value;t.forEach(n=>{const o=s.lists.findIndex(a=>a.id===n.id);s.lists[o]=n}),s.lists.sort((n,o)=>n.position-o.position),this._board.next(s)}))}deleteList(e){return this._httpClient.delete("api/apps/scrumboard/board/list",{params:{id:e}}).pipe((0,w.b)(t=>{const s=this._board.value,n=s.lists.findIndex(o=>o.id===e);s.lists.splice(n,1),s.lists.sort((o,a)=>o.position-a.position),this._board.next(s)}))}getCard(e){return this._board.pipe((0,y.q)(1),(0,b.U)(t=>{const s=t.lists.find(n=>n.cards.some(o=>o.id===e)).cards.find(n=>n.id===e);return this._card.next(s),s}),(0,S.w)(t=>t?(0,He.of)(t):(0,yt._)("Could not found the card with id of "+e+"!")))}createCard(e){return this._httpClient.put("api/apps/scrumboard/board/card",{card:e}).pipe((0,b.U)(t=>new tt(t)),(0,w.b)(t=>{const s=this._board.value;return s.lists.forEach((n,o,a)=>{n.id===t.listId&&a[o].cards.push(t)}),this._board.next(s),t}))}updateCard(e,t){return this.board$.pipe((0,y.q)(1),(0,S.w)(s=>this._httpClient.patch("api/apps/scrumboard/board/card",{id:e,card:t}).pipe((0,b.U)(n=>(s.lists.forEach(o=>{o.cards.forEach((a,l,c)=>{a.id===e&&(c[l]=n)})}),this._board.next(s),this._card.next(n),n)))))}updateCards(e){return this._httpClient.patch("api/apps/scrumboard/board/cards",{cards:e}).pipe((0,b.U)(t=>t.map(s=>new tt(s))),(0,w.b)(t=>{const s=this._board.value;t.forEach(n=>{const o=s.lists.findIndex(l=>l.id===n.listId),a=s.lists[o].cards.findIndex(l=>l.id===n.id);s.lists[o].cards[a]=n,s.lists[o].cards.sort((l,c)=>l.position-c.position)}),this._board.next(s)}))}deleteCard(e){return this.board$.pipe((0,y.q)(1),(0,S.w)(t=>this._httpClient.delete("api/apps/scrumboard/board/card",{params:{id:e}}).pipe((0,b.U)(s=>(t.lists.forEach(n=>{n.cards.forEach((o,a,l)=>{o.id===e&&l.splice(a,1)})}),this._board.next(t),this._card.next(null),s)))))}updateCardPositions(e){}createLabel(e){return this.board$.pipe((0,y.q)(1),(0,S.w)(t=>this._httpClient.post("api/apps/scrumboard/board/label",{label:e}).pipe((0,b.U)(s=>(t.labels=[...t.labels,s],this._board.next(t),s)))))}updateLabel(e,t){return this.board$.pipe((0,y.q)(1),(0,S.w)(s=>this._httpClient.patch("api/apps/scrumboard/board/label",{id:e,label:t}).pipe((0,b.U)(n=>{const o=s.labels.findIndex(a=>a.id===e);return s.labels[o]=n,this._board.next(s),n}))))}deleteLabel(e){return this.board$.pipe((0,y.q)(1),(0,S.w)(t=>this._httpClient.delete("api/apps/scrumboard/board/label",{params:{id:e}}).pipe((0,b.U)(s=>{const n=t.labels.findIndex(o=>o.id===e);return t.labels.splice(n,1),s&&t.lists.forEach(o=>{o.cards.forEach(a=>{const l=a.labels.findIndex(c=>c.id===e);l>-1&&a.labels.splice(l,1)})}),this._board.next(t),s}))))}search(e){return this._httpClient.get("api/apps/scrumboard/board/search",{params:{query:e}})}};let k=R;function Ve(r,e){if(1&r&&(i.ynx(0),i._UZ(1,"img",18),i.BQk()),2&r){const t=e.$implicit;i.xp6(1),i.Q6J("src",t.avatar,i.LSH)}}function Ye(r,e){if(1&r&&(i.ynx(0),i.TgZ(1,"div",19)(2,"div",20),i._uU(3),i.qZA()(),i.BQk()),2&r){const t=i.oxw(2).$implicit;i.xp6(3),i.hij(" +",t.members.slice(5).length," ")}}function $e(r,e){if(1&r&&(i.ynx(0),i._UZ(1,"div",16),i.TgZ(2,"div",17),i.YNc(3,Ve,2,1,"ng-container",4),i.YNc(4,Ye,4,1,"ng-container",12),i.qZA(),i.BQk()),2&r){const t=i.oxw().$implicit,s=i.oxw();i.xp6(3),i.Q6J("ngForOf",t.members.slice(0,5))("ngForTrackBy",s.trackByFn),i.xp6(1),i.Q6J("ngIf",t.members.length>5)}}R.\u0275fac=function(t){return new(t||R)(i.LFG(Ge.eN))},R.\u0275prov=i.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"});const qe=function(r){return[r]};function Ke(r,e){if(1&r&&(i.ynx(0),i.TgZ(1,"a",7)(2,"div",8),i._UZ(3,"mat-icon",9),i.qZA(),i.TgZ(4,"div",10),i._uU(5),i.qZA(),i.TgZ(6,"div",11),i._uU(7),i.qZA(),i.YNc(8,$e,5,3,"ng-container",12),i.TgZ(9,"div",13)(10,"div",14),i._uU(11,"Edited:"),i.qZA(),i.TgZ(12,"div",15),i._uU(13),i.qZA()()(),i.BQk()),2&r){const t=e.$implicit,s=i.oxw();i.xp6(1),i.Q6J("routerLink",i.VKq(6,qe,t.id)),i.xp6(2),i.Q6J("svgIcon",t.icon),i.xp6(2),i.Oqu(t.title),i.xp6(2),i.Oqu(t.description),i.xp6(1),i.Q6J("ngIf",null==t.members?null:t.members.length),i.xp6(5),i.Oqu(s.formatDateAsRelative(t.lastActivity))}}const z=class{constructor(e,t){this._changeDetectorRef=e,this._scrumboardService=t,this._unsubscribeAll=new p.x}ngOnInit(){this._scrumboardService.boards$.pipe((0,T.R)(this._unsubscribeAll)).subscribe(e=>{this.boards=e,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}formatDateAsRelative(e){return f.ou.fromISO(e).toRelative()}trackByFn(e,t){return t.id||e}};let wt=z;z.\u0275fac=function(t){return new(t||z)(i.Y36(i.sBO),i.Y36(k))},z.\u0275cmp=i.Xpm({type:z,selectors:[["scrumboard-boards"]],decls:8,vars:3,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-auto","items-center","p-6","sm:p-10"],[1,"mt-4","md:mt-24","text-3xl","md:text-6xl","font-extrabold","tracking-tight","leading-7","sm:leading-10"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-4","mt-8","md:mt-16"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","flex-col","items-center","justify-center","w-56","rounded-lg","cursor-pointer","border-2","border-gray-300","border-dashed","hover:bg-hover","transition-colors","duration-150","ease-in-out"],[1,"icon-size-12","text-hint",3,"svgIcon"],[1,"flex","flex-col","items-start","w-56","p-6","rounded-lg","shadow","bg-card","rounded-lg","hover:shadow-xl","transition-shadow","duration-150","ease-in-out",3,"routerLink"],[1,"flex","items-center","justify-center","p-4","rounded-full","bg-primary-50","text-primary-700","dark:bg-primary","dark:text-on-primary"],[1,"text-current",3,"svgIcon"],[1,"mt-5","text-lg","font-medium","leading-5"],[1,"mt-0.5","line-clamp-2","text-secondary"],[4,"ngIf"],[1,"flex","items-center","mt-4","text-md","font-md"],[1,"text-secondary"],[1,"ml-1"],[1,"w-12","h-1","mt-6","border-t-2"],[1,"flex","items-center","mt-6","-space-x-1.5"],["alt","Member avatar",1,"flex-0","w-8","h-8","rounded-full","ring","ring-offset-1","ring-bg-card","ring-offset-transparent","object-cover",3,"src"],[1,"flex","flex-0","items-center","justify-center","w-8","h-8","rounded-full","ring","ring-offset-1","ring-bg-card","ring-offset-transparent","bg-gray-200","text-gray-500"],[1,"text-md","font-semibold"]],template:function(t,s){1&t&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2),i._uU(3," Scrumboard Boards "),i.qZA(),i.TgZ(4,"div",3),i.YNc(5,Ke,14,8,"ng-container",4),i.TgZ(6,"div",5),i._UZ(7,"mat-icon",6),i.qZA()()()()),2&t&&(i.xp6(5),i.Q6J("ngForOf",s.boards)("ngForTrackBy",s.trackByFn),i.xp6(2),i.Q6J("svgIcon","heroicons_outline:plus"))},dependencies:[P.rH,q.PQ,N.Hw,v.sg,v.O5],encapsulation:2,changeDetection:0});var ge=d(262);const E=class{constructor(e){this._scrumboardService=e}resolve(e,t){return this._scrumboardService.getBoards()}};let St=E;E.\u0275fac=function(t){return new(t||E)(i.LFG(k))},E.\u0275prov=i.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"});const L=class{constructor(e,t){this._router=e,this._scrumboardService=t}resolve(e,t){return this._scrumboardService.getBoard(e.paramMap.get("boardId")).pipe((0,ge.K)(s=>{console.error(s);const n=t.url.split("/").slice(0,-1).join("/");return this._router.navigateByUrl(n),(0,yt._)(s)}))}};let Ct=L;L.\u0275fac=function(t){return new(t||L)(i.LFG(P.F0),i.LFG(k))},L.\u0275prov=i.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"});const A=class{constructor(e,t){this._router=e,this._scrumboardService=t}resolve(e,t){return this._scrumboardService.getCard(e.paramMap.get("cardId")).pipe((0,ge.K)(s=>{console.error(s);const n=t.url.split("/").slice(0,-1).join("/");return this._router.navigateByUrl(n),(0,yt._)(s)}))}};let It=A;A.\u0275fac=function(t){return new(t||A)(i.LFG(P.F0),i.LFG(k))},A.\u0275prov=i.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"});var m=d(4006),je=d(1683),fe=d(9349);const We=["titleInput"],Xe=["titleAutosize"],ti=function(r){return{"opacity-0 pointer-events-none":r}},ei=function(r){return{"opacity-0":r}},Q=class{constructor(e,t){this._changeDetectorRef=e,this._formBuilder=t,this.buttonTitle="Add a card",this.saved=new i.vpe,this.formVisible=!1}ngOnInit(){this.form=this._formBuilder.group({title:[""]})}save(){const e=this.form.get("title").value;!e||""===e.trim()||(this.saved.next(e.trim()),this.formVisible=!1,this.form.get("title").setValue(""),setTimeout(()=>{this.titleInput.nativeElement.value="",this.titleAutosize.reset()}),this._changeDetectorRef.markForCheck())}toggleFormVisibility(){this.formVisible=!this.formVisible,this.formVisible&&this.titleInput.nativeElement.focus()}};let Tt=Q;Q.\u0275fac=function(t){return new(t||Q)(i.Y36(i.sBO),i.Y36(m.QS))},Q.\u0275cmp=i.Xpm({type:Q,selectors:[["scrumboard-board-add-card"]],viewQuery:function(t,s){if(1&t&&(i.Gf(We,5),i.Gf(Xe,5)),2&t){let n;i.iGM(n=i.CRH())&&(s.titleInput=n.first),i.iGM(n=i.CRH())&&(s.titleAutosize=n.first)}},inputs:{buttonTitle:"buttonTitle"},outputs:{saved:"saved"},decls:17,vars:18,consts:[[1,"p-3","pt-0"],[1,"relative","flex","w-full","h-full","rounded-lg"],["mat-button","","disableRipple","",1,"absolute","inset-0","justify-start","w-full","rounded-lg",3,"ngClass","click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2","text-secondary"],[1,"flex","flex-col","items-start","w-full",3,"ngClass","formGroup"],[1,"flex","w-full","p-5","rounded-lg","shadow","bg-card"],["cdkTextareaAutosize","",1,"w-full","text-lg","font-medium","leading-5",3,"spellcheck","formControlName","placeholder","keydown.enter"],["titleInput","","titleAutosize","cdkTextareaAutosize"],[1,"flex","items-center","mt-2"],["mat-flat-button","",1,"h-8","min-h-8",3,"color","type","click"],["mat-icon-button","",1,"ml-1","w-8","h-8","min-h-8",3,"type","click"],[1,"icon-size-4",3,"svgIcon"]],template:function(t,s){1&t&&(i.TgZ(0,"div",0)(1,"div",1)(2,"button",2),i.NdJ("click",function(){return s.toggleFormVisibility()}),i._UZ(3,"mat-icon",3),i.TgZ(4,"span",4),i._uU(5),i.qZA()(),i.TgZ(6,"form",5)(7,"div",6)(8,"textarea",7,8),i.NdJ("keydown.enter",function(){return s.save()}),i._uU(11,"                "),i.qZA()(),i.TgZ(12,"div",9)(13,"button",10),i.NdJ("click",function(){return s.save()}),i._uU(14," Add card "),i.qZA(),i.TgZ(15,"button",11),i.NdJ("click",function(){return s.toggleFormVisibility()}),i._UZ(16,"mat-icon",12),i.qZA()()()()()),2&t&&(i.ekj("h-13",!s.formVisible),i.xp6(2),i.Q6J("ngClass",i.VKq(14,ti,s.formVisible)),i.xp6(1),i.Q6J("svgIcon","heroicons_outline:plus-circle"),i.xp6(2),i.Oqu(s.buttonTitle),i.xp6(1),i.Q6J("ngClass",i.VKq(16,ei,!s.formVisible))("formGroup",s.form),i.xp6(2),i.Q6J("spellcheck","off")("formControlName","title")("placeholder","Enter card title..."),i.xp6(5),i.Q6J("color","primary")("type","button"),i.xp6(2),i.Q6J("type","button"),i.xp6(1),i.Q6J("svgIcon","heroicons_solid:x"))},dependencies:[C.lW,C.RK,N.Hw,fe.IC,v.mk,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u],encapsulation:2,changeDetection:0});const ii=["titleInput"],si=function(r){return{"opacity-0 pointer-events-none":r}},ni=function(r){return{"opacity-0":r}},H=class{constructor(e,t){this._changeDetectorRef=e,this._formBuilder=t,this.buttonTitle="Add a list",this.saved=new i.vpe,this.formVisible=!1}ngOnInit(){this.form=this._formBuilder.group({title:[""]})}save(){const e=this.form.get("title").value;!e||""===e.trim()||(this.saved.next(e.trim()),this.form.get("title").setValue(""),this.formVisible=!1,this._changeDetectorRef.markForCheck())}toggleFormVisibility(){this.formVisible=!this.formVisible,this.formVisible&&this.titleInput.nativeElement.focus()}};let Pt=H;function ri(r,e){if(1&r&&(i.ynx(0),i.TgZ(1,"div",30),i._UZ(2,"img",31),i.qZA(),i.BQk()),2&r){const t=i.oxw().$implicit;i.xp6(2),i.Q6J("src",t.coverImage,i.LSH)}}function oi(r,e){if(1&r&&(i.ynx(0),i.TgZ(1,"div",33),i._uU(2),i.qZA(),i.BQk()),2&r){const t=e.$implicit;i.xp6(2),i.hij(" ",t.title," ")}}function ai(r,e){if(1&r&&(i.ynx(0),i.TgZ(1,"div")(2,"div",32),i.YNc(3,oi,3,1,"ng-container",12),i.qZA()(),i.BQk()),2&r){const t=i.oxw().$implicit,s=i.oxw(2);i.xp6(3),i.Q6J("ngForOf",t.labels)("ngForTrackBy",s.trackByFn)}}H.\u0275fac=function(t){return new(t||H)(i.Y36(i.sBO),i.Y36(m.QS))},H.\u0275cmp=i.Xpm({type:H,selectors:[["scrumboard-board-add-list"]],viewQuery:function(t,s){if(1&t&&i.Gf(ii,5),2&t){let n;i.iGM(n=i.CRH())&&(s.titleInput=n.first)}},inputs:{buttonTitle:"buttonTitle"},outputs:{saved:"saved"},decls:14,vars:18,consts:[[1,"mt-11","w-64","py-2.5","px-2"],[1,"relative","flex","w-full","h-full","overflow-hidden","rounded-xl","bg-gray-200","dark:bg-gray-700"],["mat-button","","disableRipple","",1,"absolute","inset-0","justify-start","w-full","px-3","rounded-xl","bg-transparent",3,"ngClass","click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2","text-secondary"],[1,"flex","flex-col","items-start","w-full","p-3",3,"ngClass","formGroup"],[1,"w-full","py-2","px-3","leading-5","rounded-md","shadow-sm","border","border-gray-300","bg-white","focus:border-primary","dark:border-gray-500","dark:focus:border-primary","dark:bg-black","dark:bg-opacity-5",3,"autocomplete","formControlName","placeholder","keydown.enter"],["titleInput",""],[1,"flex","items-center","mt-2"],["mat-flat-button","",1,"h-8","min-h-8",3,"color","type","click"],["mat-icon-button","",1,"ml-1","w-8","h-8","min-h-8",3,"type","click"],[1,"icon-size-4",3,"svgIcon"]],template:function(t,s){1&t&&(i.TgZ(0,"div",0)(1,"div",1)(2,"button",2),i.NdJ("click",function(){return s.toggleFormVisibility()}),i._UZ(3,"mat-icon",3),i.TgZ(4,"span",4),i._uU(5),i.qZA()(),i.TgZ(6,"form",5)(7,"input",6,7),i.NdJ("keydown.enter",function(){return s.save()}),i.qZA(),i.TgZ(9,"div",8)(10,"button",9),i.NdJ("click",function(){return s.save()}),i._uU(11," Add list "),i.qZA(),i.TgZ(12,"button",10),i.NdJ("click",function(){return s.toggleFormVisibility()}),i._UZ(13,"mat-icon",11),i.qZA()()()()()),2&t&&(i.ekj("h-15",!s.formVisible),i.xp6(2),i.Q6J("ngClass",i.VKq(14,si,s.formVisible)),i.xp6(1),i.Q6J("svgIcon","heroicons_outline:plus-circle"),i.xp6(2),i.Oqu(s.buttonTitle),i.xp6(1),i.Q6J("ngClass",i.VKq(16,ni,!s.formVisible))("formGroup",s.form),i.xp6(1),i.Q6J("autocomplete","off")("formControlName","title")("placeholder","Enter list title..."),i.xp6(3),i.Q6J("color","primary")("type","button"),i.xp6(2),i.Q6J("type","button"),i.xp6(1),i.Q6J("svgIcon","heroicons_solid:x"))},dependencies:[C.lW,C.RK,N.Hw,v.mk,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u],encapsulation:2,changeDetection:0});const li=function(r){return{"text-red-600":r}};function ci(r,e){if(1&r&&(i.ynx(0),i.TgZ(1,"div",34),i._UZ(2,"mat-icon",35),i.TgZ(3,"div",21),i._uU(4),i.ALo(5,"date"),i.qZA()(),i.BQk()),2&r){const t=i.oxw().$implicit,s=i.oxw(2);i.xp6(1),i.Q6J("ngClass",i.VKq(6,li,s.isOverdue(t.dueDate))),i.xp6(1),i.Q6J("svgIcon","heroicons_outline:clock"),i.xp6(2),i.hij(" ",i.xi3(5,3,t.dueDate,"longDate")," ")}}const di=function(r){return["card",r]};function hi(r,e){if(1&r&&(i.ynx(0),i.TgZ(1,"a",27),i.YNc(2,ri,3,1,"ng-container",28),i.TgZ(3,"div",29),i._uU(4),i.qZA(),i.YNc(5,ai,4,2,"ng-container",28),i.YNc(6,ci,6,8,"ng-container",28),i.qZA(),i.BQk()),2&r){const t=e.$implicit;i.xp6(1),i.Q6J("routerLink",i.VKq(5,di,t.id)),i.xp6(1),i.Q6J("ngIf",t.coverImage),i.xp6(2),i.Oqu(t.title),i.xp6(1),i.Q6J("ngIf",t.labels.length),i.xp6(1),i.Q6J("ngIf",t.dueDate)}}function ui(r,e){if(1&r){const t=i.EpF();i.ynx(0),i.TgZ(1,"div",15)(2,"div",16)(3,"div",17)(4,"input",18,19),i.NdJ("focusout",function(n){const a=i.CHM(t).$implicit,l=i.oxw();return i.KtG(l.updateListTitle(n,a))})("keydown.enter",function(){i.CHM(t);const n=i.MAs(5);return i.KtG(n.blur())}),i.qZA()(),i.TgZ(6,"div",20),i._uU(7),i.qZA(),i.TgZ(8,"div",21)(9,"button",22),i._UZ(10,"mat-icon",6),i.qZA(),i.TgZ(11,"mat-menu",null,23)(13,"button",24),i.NdJ("click",function(){i.CHM(t);const n=i.MAs(5),o=i.oxw();return i.KtG(o.renameList(n))}),i._UZ(14,"mat-icon",6),i._uU(15," Rename list "),i.qZA(),i.TgZ(16,"button",24),i.NdJ("click",function(){const o=i.CHM(t).$implicit,a=i.oxw();return i.KtG(a.deleteList(o.id))}),i._UZ(17,"mat-icon",6),i._uU(18," Delete list "),i.qZA()()()(),i.TgZ(19,"div",25)(20,"div",26),i.NdJ("cdkDropListDropped",function(n){i.CHM(t);const o=i.oxw();return i.KtG(o.cardDropped(n))}),i.YNc(21,hi,7,7,"ng-container",12),i.qZA(),i.TgZ(22,"scrumboard-board-add-card",13),i.NdJ("saved",function(n){const a=i.CHM(t).$implicit,l=i.oxw();return i.KtG(l.addCard(a,n))}),i.qZA()()(),i.BQk()}if(2&r){const t=e.$implicit,s=i.MAs(12),n=i.oxw();i.xp6(1),i.Q6J("cdkDragLockAxis","x"),i.xp6(3),i.Q6J("spellcheck","false")("value",t.title),i.xp6(3),i.hij(" ",t.cards.length," "),i.xp6(2),i.Q6J("matMenuTriggerFor",s),i.xp6(1),i.Q6J("svgIcon","heroicons_solid:dots-vertical"),i.xp6(4),i.Q6J("svgIcon","heroicons_solid:pencil-alt"),i.xp6(3),i.Q6J("svgIcon","heroicons_solid:trash"),i.xp6(3),i.Q6J("id",t.id)("cdkDropListData",t.cards),i.xp6(1),i.Q6J("ngForOf",t.cards)("ngForTrackBy",n.trackByFn),i.xp6(1),i.Q6J("buttonTitle",t.cards.length?"Add another card":"Add a card")}}const pi=function(){return[".."]},G=class{constructor(e,t,s,n){this._changeDetectorRef=e,this._formBuilder=t,this._fuseConfirmationService=s,this._scrumboardService=n,this._positionStep=65536,this._maxListCount=200,this._maxPosition=500*this._positionStep,this._unsubscribeAll=new p.x}ngOnInit(){this.listTitleForm=this._formBuilder.group({title:[""]}),this._scrumboardService.board$.pipe((0,T.R)(this._unsubscribeAll)).subscribe(e=>{this.board={...e},this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}renameList(e){setTimeout(()=>{e.focus()})}addList(e){if(this.board.lists.length>=this._maxListCount)return;const t=new J({boardId:this.board.id,position:this.board.lists.length?this.board.lists[this.board.lists.length-1].position+this._positionStep:this._positionStep,title:e});this._scrumboardService.createList(t).subscribe()}updateListTitle(e,t){const s=e.target,n=s.value;n&&""!==n.trim()?(t.title=s.value=n.trim(),this._scrumboardService.updateList(t).subscribe()):s.value=t.title}deleteList(e){this._fuseConfirmationService.open({title:"Delete list",message:"Are you sure you want to delete this list and its cards? This action cannot be undone!",actions:{confirm:{label:"Delete"}}}).afterClosed().subscribe(s=>{"confirmed"===s&&this._scrumboardService.deleteList(e).subscribe()})}addCard(e,t){const s=new tt({boardId:this.board.id,listId:e.id,position:e.cards.length?e.cards[e.cards.length-1].position+this._positionStep:this._positionStep,title:t});this._scrumboardService.createCard(s).subscribe()}listDropped(e){gt(e.container.data,e.previousIndex,e.currentIndex);const t=this._calculatePositions(e);this._scrumboardService.updateLists(t).subscribe()}cardDropped(e){e.previousContainer===e.container?gt(e.container.data,e.previousIndex,e.currentIndex):(function Ie(r,e,t,s){const n=X(t,r.length-1),o=X(s,e.length);r.length&&e.splice(o,0,r.splice(n,1)[0])}(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),e.container.data[e.currentIndex].listId=e.container.id);const t=this._calculatePositions(e);this._scrumboardService.updateCards(t).subscribe()}isOverdue(e){return f.ou.fromISO(e).startOf("day")<f.ou.now().startOf("day")}trackByFn(e,t){return t.id||e}_calculatePositions(e){let t=e.container.data;const s=t[e.currentIndex],n=t[e.currentIndex-1]||null,o=t[e.currentIndex+1]||null;return s.position=n?o?(n.position+o.position)/2:n.position+this._positionStep:o?o.position/2:this._positionStep,!Number.isInteger(s.position)||s.position>=this._maxPosition?(t=t.map((a,l)=>(a.position=(l+1)*this._positionStep,a)),t):[s]}};let kt=G;G.\u0275fac=function(t){return new(t||G)(i.Y36(i.sBO),i.Y36(m.QS),i.Y36(je.R),i.Y36(k))},G.\u0275cmp=i.Xpm({type:G,selectors:[["scrumboard-board"]],decls:21,vars:10,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","sm:py-8","sm:px-10","border-b","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"text-3xl","md:text-4xl","font-extrabold","tracking-tight","leading-7","sm:leading-10","truncate"],[1,"flex","shrink-0","items-center","mt-6","sm:mt-0","sm:ml-4"],["mat-stroked-button","",3,"routerLink"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2"],["mat-stroked-button","",1,"ml-3"],["cdkScrollable","",1,"flex-auto","p-6","sm:p-8","sm:pt-4","overflow-y-auto"],["cdkDropList","",1,"flex",3,"cdkDropListData","cdkDropListOrientation","cdkDropListDropped"],["cdkDropListGroup","",1,"flex","items-start"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"buttonTitle","saved"],[1,"absolute","invisible","w-0","h-0","opacity-0","pointer-events-none"],["cdkDrag","",1,"flex-0","w-72","p-2","rounded-2xl","bg-default",3,"cdkDragLockAxis"],["cdkDragHandle","",1,"flex","items-center","justify-between"],[1,"flex","items-center","w-full","py-2","px-3","rounded-md","cursor-text","border","border-transparent","focus-within:bg-white","focus-within:shadow-sm","focus-within:border-primary","dark:focus-within:bg-gray-900"],[1,"w-full","font-medium","leading-5","bg-transparent",3,"spellcheck","value","focusout","keydown.enter"],["listTitleInput",""],[1,"flex","items-center","justify-center","min-w-6","ml-4","text-sm","font-semibold","leading-6","rounded-full","bg-gray-300","text-secondary","dark:bg-gray-700"],[1,"ml-1"],["mat-icon-button","",1,"w-8","h-8","min-h-8",3,"matMenuTriggerFor"],["listMenu","matMenu"],["mat-menu-item","",3,"click"],[1,"mt-2","rounded-xl","bg-gray-400","bg-opacity-12","dark:bg-transparent","dark:border"],["cdkDropList","",1,"p-3","pb-0",3,"id","cdkDropListData","cdkDropListDropped"],["cdkDrag","",1,"flex","flex-col","items-start","mb-3","p-5","space-y-3","shadow","rounded-lg","overflow-hidden","bg-card",3,"routerLink"],[4,"ngIf"],[1,"text-lg","font-medium","leading-5"],[1,"-mx-5","-mt-5","mb-2"],[1,"w-full","object-cover",3,"src"],[1,"flex","flex-wrap","-mx-1","-mb-2"],[1,"mx-1","mb-2","py-0.5","px-3","rounded-full","text-sm","font-medium","text-gray-500","bg-gray-100","dark:text-gray-300","dark:bg-gray-700"],[1,"flex","items-center","rounded","text-sm","font-medium","leading-5","text-secondary",3,"ngClass"],[1,"icon-size-4","text-current",3,"svgIcon"]],template:function(t,s){1&t&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),i._uU(4),i.qZA()(),i.TgZ(5,"div",4)(6,"a",5),i._UZ(7,"mat-icon",6),i.TgZ(8,"span",7),i._uU(9,"Boards"),i.qZA()(),i.TgZ(10,"button",8),i._UZ(11,"mat-icon",6),i.TgZ(12,"span",7),i._uU(13,"Settings"),i.qZA()()()(),i.TgZ(14,"div",9)(15,"div",10),i.NdJ("cdkDropListDropped",function(o){return s.listDropped(o)}),i.TgZ(16,"div",11),i.YNc(17,ui,23,13,"ng-container",12),i.TgZ(18,"scrumboard-board-add-list",13),i.NdJ("saved",function(o){return s.addList(o)}),i.qZA()()()()(),i.TgZ(19,"div",14),i._UZ(20,"router-outlet"),i.qZA()),2&t&&(i.xp6(4),i.hij(" ",s.board.title," "),i.xp6(2),i.Q6J("routerLink",i.DdM(9,pi)),i.xp6(1),i.Q6J("svgIcon","heroicons_solid:view-boards"),i.xp6(4),i.Q6J("svgIcon","heroicons_solid:cog"),i.xp6(4),i.Q6J("cdkDropListData",s.board.lists)("cdkDropListOrientation","horizontal"),i.xp6(2),i.Q6J("ngForOf",s.board.lists)("ngForTrackBy",s.trackByFn),i.xp6(1),i.Q6J("buttonTitle",s.board.lists.length?"Add another list":"Add a list"))},dependencies:[P.lC,P.rH,q.PQ,se,te,ae,ne,C.zs,C.lW,C.RK,N.Hw,rt.VK,rt.OP,rt.p6,v.mk,v.sg,v.O5,Tt,Pt,v.uU],styles:[".cdk-drag-preview{--tw-shadow: 0 25px 50px -12px rgb(0 0 0 / .25);--tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.cdk-drag-placeholder{opacity:0}.cdk-drag-animating{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging div:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}\n"],encapsulation:2,changeDetection:0});var gi=d(8372),fi=d(9858);const mi=["labelInput"];function _i(r,e){if(1&r&&(i.ynx(0),i._uU(1),i.ALo(2,"date"),i.BQk()),2&r){const t=i.oxw();i.xp6(1),i.Oqu(i.xi3(2,1,t.card.dueDate,"longDate"))}}function bi(r,e){1&r&&(i.ynx(0),i._uU(1,"Not set"),i.BQk())}function vi(r,e){if(1&r){const t=i.EpF();i.ynx(0),i.TgZ(1,"mat-checkbox",26),i.NdJ("change",function(n){const a=i.CHM(t).$implicit,l=i.oxw();return i.KtG(l.toggleProductTag(a,n))}),i._uU(2),i.qZA(),i.BQk()}if(2&r){const t=e.$implicit,s=i.oxw();i.xp6(1),i.Q6J("color","primary")("checked",s.hasLabel(t)),i.xp6(1),i.hij(" ",t.title," ")}}const Di=function(r,e,t){return{"text-gray-500 bg-gray-100 dark:text-gray-300 dark:bg-gray-700":r,"text-green-800 bg-green-200 dark:text-green-100 dark:bg-green-500":e,"text-red-800 bg-red-200 dark:text-red-100 dark:bg-red-500":t}},V=class{constructor(e,t,s,n){this.matDialogRef=e,this._changeDetectorRef=t,this._formBuilder=s,this._scrumboardService=n,this._unsubscribeAll=new p.x}ngOnInit(){this._scrumboardService.board$.pipe((0,T.R)(this._unsubscribeAll)).subscribe(e=>{this.board=e,this.labels=this.filteredLabels=e.labels}),this._scrumboardService.card$.pipe((0,T.R)(this._unsubscribeAll)).subscribe(e=>{this.card=e}),this.cardForm=this._formBuilder.group({id:[""],title:["",m.kI.required],description:[""],labels:[[]],dueDate:[null]}),this.cardForm.setValue({id:this.card.id,title:this.card.title,description:this.card.description,labels:this.card.labels,dueDate:this.card.dueDate}),this.cardForm.valueChanges.pipe((0,w.b)(e=>{this.card=(0,fi.Z)(this.card,e)}),(0,gi.b)(300),(0,T.R)(this._unsubscribeAll)).subscribe(e=>{this._scrumboardService.updateCard(e.id,e).subscribe(),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}hasLabel(e){return!!this.card.labels.find(t=>t.id===e.id)}filterLabels(e){const t=e.target.value.toLowerCase();this.filteredLabels=this.labels.filter(s=>s.title.toLowerCase().includes(t))}filterLabelsInputKeyDown(e){if("Enter"!==e.key||0===this.filteredLabels.length)return;const t=this.filteredLabels[0];this.card.labels.find(n=>n.id===t.id)?this.removeLabelFromCard(t):this.addLabelToCard(t)}toggleProductTag(e,t){t.checked?this.addLabelToCard(e):this.removeLabelFromCard(e)}addLabelToCard(e){this.card.labels.unshift(e),this.cardForm.get("labels").patchValue(this.card.labels),this._changeDetectorRef.markForCheck()}removeLabelFromCard(e){this.card.labels.splice(this.card.labels.findIndex(t=>t.id===e.id),1),this.cardForm.get("labels").patchValue(this.card.labels),this._changeDetectorRef.markForCheck()}isOverdue(e){return f.ou.fromISO(e).startOf("day")<f.ou.now().startOf("day")}trackByFn(e,t){return t.id||e}_readAsDataURL(e){return new Promise((t,s)=>{const n=new FileReader;n.onload=()=>{t(n.result)},n.onerror=o=>{s(o)},n.readAsDataURL(e)})}};let Rt=V;V.\u0275fac=function(t){return new(t||V)(i.Y36(vt.so),i.Y36(i.sBO),i.Y36(m.QS),i.Y36(k))},V.\u0275cmp=i.Xpm({type:V,selectors:[["scrumboard-card-details"]],viewQuery:function(t,s){if(1&t&&i.Gf(mi,5),2&t){let n;i.iGM(n=i.CRH())&&(s.labelInput=n.first)}},decls:44,vars:27,consts:[[1,"flex","flex-col","flex-auto","md:w-160","md:min-w-160","max-h-160","-m-6","overflow-y-auto"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],[1,"text-lg","font-medium"],["mat-icon-button","",3,"tabIndex","click"],[1,"text-current",3,"svgIcon"],[1,"flex","flex-col","flex-0","items-start","w-full","p-6","sm:p-8","space-y-6","overflow-y-auto",3,"formGroup"],[1,"w-full",3,"subscriptSizing"],["matInput","","cdkTextareaAutosize","",3,"formControlName","rows","cdkAutosizeMinRows"],[1,"font-medium"],[1,"relative","flex","items-center","mt-1.5","px-4","leading-9","rounded-full","cursor-pointer",3,"ngClass","click"],[1,"icon-size-5","text-current",3,"svgIcon"],[1,"ml-2","text-md","font-medium"],[4,"ngIf"],[1,"fuse-mat-dense","invisible","absolute","inset-0","-mt-2.5","opacity-0","pointer-events-none",3,"subscriptSizing"],["matInput","",3,"formControlName","matDatepicker"],["dueDatePicker",""],["mat-button","","matDatepickerCancel","",3,"click"],["mat-flat-button","","matDatepickerApply","",3,"color"],[1,"w-full"],[1,"mt-1","rounded-md","border","border-gray-300","shadow-sm","overflow-hidden"],[1,"flex","items-center","my-2","mx-3"],[1,"flex","items-center","flex-auto","min-w-0"],[1,"icon-size-5",3,"svgIcon"],["type","text","placeholder","Enter label name",1,"min-w-0","ml-2","py-1","border-0",3,"maxLength","input","keydown"],[1,"max-h-40","leading-none","overflow-y-auto","border-t"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","items-center","h-10","min-h-10","pl-1","pr-4",3,"color","checked","change"]],template:function(t,s){if(1&t){const n=i.EpF();i.TgZ(0,"div",0)(1,"div",1)(2,"div",2),i._uU(3,"Card"),i.qZA(),i.TgZ(4,"button",3),i.NdJ("click",function(){return s.matDialogRef.close()}),i._UZ(5,"mat-icon",4),i.qZA()(),i.TgZ(6,"form",5)(7,"mat-form-field",6)(8,"mat-label"),i._uU(9,"Title"),i.qZA(),i.TgZ(10,"textarea",7),i._uU(11,"            "),i.qZA()(),i.TgZ(12,"mat-form-field",6)(13,"mat-label"),i._uU(14,"Description"),i.qZA(),i.TgZ(15,"textarea",7),i._uU(16,"            "),i.qZA()(),i.TgZ(17,"div")(18,"div",8),i._uU(19,"Due date"),i.qZA(),i.TgZ(20,"div",9),i.NdJ("click",function(){i.CHM(n);const a=i.MAs(28);return i.KtG(a.open())}),i._UZ(21,"mat-icon",10),i.TgZ(22,"span",11),i.YNc(23,_i,3,4,"ng-container",12),i.YNc(24,bi,2,0,"ng-container",12),i.qZA(),i.TgZ(25,"mat-form-field",13),i._UZ(26,"input",14),i.TgZ(27,"mat-datepicker",null,15)(29,"mat-datepicker-actions")(30,"button",16),i.NdJ("click",function(){return s.cardForm.get("dueDate").setValue(null)}),i._uU(31," Clear "),i.qZA(),i.TgZ(32,"button",17),i._uU(33," Select "),i.qZA()()()()()(),i.TgZ(34,"div",18)(35,"div",8),i._uU(36,"Labels"),i.qZA(),i.TgZ(37,"div",19)(38,"div",20)(39,"div",21),i._UZ(40,"mat-icon",22),i.TgZ(41,"input",23),i.NdJ("input",function(a){return s.filterLabels(a)})("keydown",function(a){return s.filterLabelsInputKeyDown(a)}),i.qZA()()(),i.TgZ(42,"div",24),i.YNc(43,vi,3,3,"ng-container",25),i.qZA()()()()()}if(2&t){const n=i.MAs(28);i.xp6(4),i.Q6J("tabIndex",-1),i.xp6(1),i.Q6J("svgIcon","heroicons_outline:x"),i.xp6(1),i.Q6J("formGroup",s.cardForm),i.xp6(1),i.Q6J("subscriptSizing","dynamic"),i.xp6(3),i.Q6J("formControlName","title")("rows",1)("cdkAutosizeMinRows",1),i.xp6(2),i.Q6J("subscriptSizing","dynamic"),i.xp6(3),i.Q6J("formControlName","description")("rows",1)("cdkAutosizeMinRows",1),i.xp6(5),i.Q6J("ngClass",i.kEZ(23,Di,!s.card.dueDate,s.card.dueDate&&!s.isOverdue(s.card.dueDate),s.card.dueDate&&s.isOverdue(s.card.dueDate))),i.xp6(1),i.Q6J("svgIcon","heroicons_solid:calendar"),i.xp6(2),i.Q6J("ngIf",s.card.dueDate),i.xp6(1),i.Q6J("ngIf",!s.card.dueDate),i.xp6(1),i.Q6J("subscriptSizing","dynamic"),i.xp6(1),i.Q6J("formControlName","dueDate")("matDatepicker",n),i.xp6(6),i.Q6J("color","primary"),i.xp6(8),i.Q6J("svgIcon","heroicons_solid:search"),i.xp6(1),i.Q6J("maxLength",50),i.xp6(2),i.Q6J("ngForOf",s.filteredLabels)("ngForTrackBy",s.trackByFn)}},dependencies:[C.lW,C.RK,le.oG,U.Mq,U.hl,U.M5,U.dp,U.DK,Dt.KE,Dt.hX,N.Hw,ce.Nt,fe.IC,v.mk,v.sg,v.O5,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,v.uU],encapsulation:2,changeDetection:0});const Y=class{constructor(e,t,s){this._activatedRoute=e,this._matDialog=t,this._router=s}ngOnInit(){this._matDialog.open(Rt,{autoFocus:!1}).afterClosed().subscribe(()=>{this._router.navigate(["./../.."],{relativeTo:this._activatedRoute})})}};let Et=Y;Y.\u0275fac=function(t){return new(t||Y)(i.Y36(P.gz),i.Y36(vt.uw),i.Y36(P.F0))},Y.\u0275cmp=i.Xpm({type:Y,selectors:[["scrumboard-card"]],decls:1,vars:0,template:function(t,s){1&t&&i._uU(0,"SCRUMBOARD -> BOARDS -> LIST -> CARD\n")},encapsulation:2,changeDetection:0});const xi=[{path:"",component:wt,resolve:{boards:St}},{path:":boardId",component:kt,resolve:{board:Ct},children:[{path:"card/:cardId",component:Et,resolve:{card:It}}]}],O=class{};let Lt=O;O.\u0275fac=function(t){return new(t||O)},O.\u0275mod=i.oAB({type:O}),O.\u0275inj=i.cJS({providers:[{provide:B.sG,useValue:he}],imports:[P.Bz.forChild(xi),Fe,C.ot,le.p9,U.FA,vt.Is,Dt.lN,N.Ps,ce.c,Je,rt.Tx,ze.Cv,Qe.m]})}}]);