"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[267],{8267:(ui,wt,d)=>{d.r(wt),d.d(wt,{ScrumboardModule:()=>N});var R=d(1390),i=d(4650),v=d(6895),z=d(7376),T=d(3353),g=d(1281),St=d(2687),p=d(7579),Q=d(727),ae=d(4986),le=d(5963),de=d(6406),Ct=d(9751),ot=d(6451),P=d(2722),at=d(8675),b=d(4004),y=d(5698),S=d(8505),C=d(3900),It=d(445);function lt(n,e,t){for(let s in e)if(e.hasOwnProperty(s)){const r=e[s];r?n.setProperty(s,r,t?.has(s)?"important":""):n.removeProperty(s)}return n}function L(n,e){const t=e?"":"none";lt(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function Tt(n,e,t){lt(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function tt(n,e){return e&&"none"!=e?n+" "+e:n}function Pt(n){const e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function ct(n,e){return n.getPropertyValue(e).split(",").map(s=>s.trim())}function dt(n){const e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function ht(n,e,t){const{top:s,bottom:r,left:o,right:a}=n;return t>=s&&t<=r&&e>=o&&e<=a}function H(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function Rt(n,e,t,s){const{top:r,right:o,bottom:a,left:l,width:c,height:h}=n,u=c*e,f=h*e;return s>r-f&&s<a+f&&t>l-u&&t<o+u}class kt{constructor(e){this._document=e,this.positions=new Map}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:dt(t)})})}handleScroll(e){const t=(0,T.sA)(e),s=this.positions.get(t);if(!s)return null;const r=s.scrollPosition;let o,a;if(t===this._document){const h=this.getViewportScrollPosition();o=h.top,a=h.left}else o=t.scrollTop,a=t.scrollLeft;const l=r.top-o,c=r.left-a;return this.positions.forEach((h,u)=>{h.clientRect&&t!==u&&t.contains(u)&&H(h.clientRect,l,c)}),r.top=o,r.left=a,{top:l,left:c}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function Et(n){const e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),s=n.nodeName.toLowerCase();e.removeAttribute("id");for(let r=0;r<t.length;r++)t[r].removeAttribute("id");return"canvas"===s?Ot(n,e):("input"===s||"select"===s||"textarea"===s)&&At(n,e),Lt("canvas",n,e,Ot),Lt("input, textarea, select",n,e,At),e}function Lt(n,e,t,s){const r=e.querySelectorAll(n);if(r.length){const o=t.querySelectorAll(n);for(let a=0;a<r.length;a++)s(r[a],o[a])}}let ue=0;function At(n,e){"file"!==e.type&&(e.value=n.value),"radio"===e.type&&e.name&&(e.name=`mat-clone-${e.name}-${ue++}`)}function Ot(n,e){const t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch{}}const Zt=(0,T.i$)({passive:!0}),et=(0,T.i$)({passive:!1}),ut=new Set(["position"]);class ge{get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(e){const t=(0,g.Ig)(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(s=>L(s,t)))}constructor(e,t,s,r,o,a){this._config=t,this._document=s,this._ngZone=r,this._viewportRuler=o,this._dragDropRegistry=a,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new p.x,this._pointerMoveSubscription=Q.w0.EMPTY,this._pointerUpSubscription=Q.w0.EMPTY,this._scrollSubscription=Q.w0.EMPTY,this._resizeSubscription=Q.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new p.x,this.started=new p.x,this.released=new p.x,this.ended=new p.x,this.entered=new p.x,this.exited=new p.x,this.dropped=new p.x,this.moved=this._moveEvents,this._pointerDown=l=>{if(this.beforeStarted.next(),this._handles.length){const c=this._getTargetHandle(l);c&&!this._disabledHandles.has(c)&&!this.disabled&&this._initializeDragSequence(c,l)}else this.disabled||this._initializeDragSequence(this._rootElement,l)},this._pointerMove=l=>{const c=this._getPointerPositionOnPage(l);if(!this._hasStartedDragging){if(Math.abs(c.x-this._pickupPositionOnPage.x)+Math.abs(c.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const k=Date.now()>=this._dragStartTime+this._getDragStartDelay(l),E=this._dropContainer;if(!k)return void this._endDragSequence(l);(!E||!E.isDragging()&&!E.isReceiving())&&(l.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(l)))}return}l.preventDefault();const h=this._getConstrainedPointerPosition(c);if(this._hasMoved=!0,this._lastKnownPointerPosition=c,this._updatePointerDirectionDelta(h),this._dropContainer)this._updateActiveDropContainer(h,c);else{const u=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,f=this._activeTransform;f.x=h.x-u.x+this._passiveTransform.x,f.y=h.y-u.y+this._passiveTransform.y,this._applyRootElementTransform(f.x,f.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:h,event:l,distance:this._getDragDistance(h),delta:this._pointerDirectionDelta})})},this._pointerUp=l=>{this._endDragSequence(l)},this._nativeDragStart=l=>{if(this._handles.length){const c=this._getTargetHandle(l);c&&!this._disabledHandles.has(c)&&!this.disabled&&l.preventDefault()}else this.disabled||l.preventDefault()},this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new kt(s),a.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(s=>(0,g.fI)(s)),this._handles.forEach(s=>L(s,this.disabled)),this._toggleNativeDragInteractions();const t=new Set;return this._disabledHandles.forEach(s=>{this._handles.indexOf(s)>-1&&t.add(s)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){const t=(0,g.fI)(e);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,et),t.addEventListener("touchstart",this._pointerDown,Zt),t.addEventListener("dragstart",this._nativeDragStart,et)}),this._initialTransform=void 0,this._rootElement=t),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?(0,g.fI)(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),L(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),L(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){const e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){const e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){G(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const t=this._dropContainer;if(t){const s=this._rootElement,r=s.parentNode,o=this._placeholder=this._createPlaceholderElement(),a=this._anchor=this._anchor||this._document.createComment(""),l=this._getShadowRoot();r.insertBefore(a,s),this._initialTransform=s.style.transform||"",this._preview=this._createPreviewElement(),Tt(s,!1,ut),this._document.body.appendChild(r.replaceChild(o,s)),this._getPreviewInsertionPoint(r,l).appendChild(this._preview),this.started.next({source:this,event:e}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();const s=this.isDragging(),r=G(t),o=!r&&0!==t.button,a=this._rootElement,l=(0,T.sA)(t),c=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),h=r?(0,St.yG)(t):(0,St.X6)(t);if(l&&l.draggable&&"mousedown"===t.type&&t.preventDefault(),s||o||c||h)return;if(this._handles.length){const D=a.style;this._rootElementTapHighlight=D.webkitTapHighlightColor||"",D.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(D=>this._updateOnScroll(D)),this._boundaryElement&&(this._boundaryRect=dt(this._boundaryElement));const u=this._previewTemplate;this._pickupPositionInElement=u&&u.template&&!u.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,e,t);const f=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:f.x,y:f.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){Tt(this._rootElement,!0,ut),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const t=this._dropContainer,s=t.getItemIndex(this),r=this._getPointerPositionOnPage(e),o=this._getDragDistance(r),a=t._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:o,dropPoint:r,event:e}),this.dropped.next({item:this,currentIndex:s,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:a,distance:o,dropPoint:r,event:e}),t.drop(this,s,this._initialIndex,this._initialContainer,a,o,r,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:s,y:r}){let o=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=o,this._dropContainer.enter(this,e,t,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(s,r),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_createPreviewElement(){const e=this._previewTemplate,t=this.previewClass,s=e?e.template:null;let r;if(s&&e){const o=e.matchSize?this._initialClientRect:null,a=e.viewContainer.createEmbeddedView(s,e.context);a.detectChanges(),r=Mt(a,this._document),this._previewRef=a,e.matchSize?Bt(r,o):r.style.transform=it(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else r=Et(this._rootElement),Bt(r,this._initialClientRect),this._initialTransform&&(r.style.transform=this._initialTransform);return lt(r.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},ut),L(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(o=>r.classList.add(o)):r.classList.add(t)),r}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);const t=function he(n){const e=getComputedStyle(n),t=ct(e,"transition-property"),s=t.find(l=>"transform"===l||"all"===l);if(!s)return 0;const r=t.indexOf(s),o=ct(e,"transition-duration"),a=ct(e,"transition-delay");return Pt(o[r])+Pt(a[r])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(s=>{const r=a=>{(!a||(0,T.sA)(a)===this._preview&&"transform"===a.propertyName)&&(this._preview?.removeEventListener("transitionend",r),s(),clearTimeout(o))},o=setTimeout(r,1.5*t);this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){const e=this._placeholderTemplate,t=e?e.template:null;let s;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),s=Mt(this._placeholderRef,this._document)):s=Et(this._rootElement),s.style.pointerEvents="none",s.classList.add("cdk-drag-placeholder"),s}_getPointerPositionInElement(e,t,s){const r=t===this._rootElement?null:t,o=r?r.getBoundingClientRect():e,a=G(s)?s.targetTouches[0]:s,l=this._getViewportScrollPosition();return{x:o.left-e.left+(a.pageX-o.left-l.left),y:o.top-e.top+(a.pageY-o.top-l.top)}}_getPointerPositionOnPage(e){const t=this._getViewportScrollPosition(),s=G(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,r=s.pageX-t.left,o=s.pageY-t.top;if(this._ownerSVGElement){const a=this._ownerSVGElement.getScreenCTM();if(a){const l=this._ownerSVGElement.createSVGPoint();return l.x=r,l.y=o,l.matrixTransform(a.inverse())}}return{x:r,y:o}}_getConstrainedPointerPosition(e){const t=this._dropContainer?this._dropContainer.lockAxis:null;let{x:s,y:r}=this.constrainPosition?this.constrainPosition(e,this,this._initialClientRect,this._pickupPositionInElement):e;if("x"===this.lockAxis||"x"===t?r=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===t)&&(s=this._pickupPositionOnPage.x),this._boundaryRect){const{x:o,y:a}=this._pickupPositionInElement,l=this._boundaryRect,{width:c,height:h}=this._getPreviewRect(),u=l.top+a,f=l.bottom-(h-a);s=Ft(s,l.left+o,l.right-(c-o)),r=Ft(r,u,f)}return{x:s,y:r}}_updatePointerDirectionDelta(e){const{x:t,y:s}=e,r=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,a=Math.abs(t-o.x),l=Math.abs(s-o.y);return a>this._config.pointerDirectionChangeThreshold&&(r.x=t>o.x?1:-1,o.x=t),l>this._config.pointerDirectionChangeThreshold&&(r.y=s>o.y?1:-1,o.y=s),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,L(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,et),e.removeEventListener("touchstart",this._pointerDown,Zt),e.removeEventListener("dragstart",this._nativeDragStart,et)}_applyRootElementTransform(e,t){const s=it(e,t),r=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=r.transform&&"none"!=r.transform?r.transform:""),r.transform=tt(s,this._initialTransform)}_applyPreviewTransform(e,t){const s=this._previewTemplate?.template?void 0:this._initialTransform,r=it(e,t);this._preview.style.transform=tt(r,s)}_getDragDistance(e){const t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(0===e&&0===t||this.isDragging()||!this._boundaryElement)return;const s=this._rootElement.getBoundingClientRect(),r=this._boundaryElement.getBoundingClientRect();if(0===r.width&&0===r.height||0===s.width&&0===s.height)return;const o=r.left-s.left,a=s.right-r.right,l=r.top-s.top,c=s.bottom-r.bottom;r.width>s.width?(o>0&&(e+=o),a>0&&(e-=a)):e=0,r.height>s.height?(l>0&&(t+=l),c>0&&(t-=c)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){const t=this.dragStartDelay;return"number"==typeof t?t:G(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){const t=this._parentPositions.handleScroll(e);if(t){const s=(0,T.sA)(e);this._boundaryRect&&s!==this._boundaryElement&&s.contains(this._boundaryElement)&&H(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,T.kV)(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){const s=this._previewContainer||"global";if("parent"===s)return e;if("global"===s){const r=this._document;return t||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return(0,g.fI)(s)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}}function it(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function Ft(n,e,t){return Math.max(e,Math.min(t,n))}function G(n){return"t"===n.type[0]}function Mt(n,e){const t=n.rootNodes;if(1===t.length&&t[0].nodeType===e.ELEMENT_NODE)return t[0];const s=e.createElement("div");return t.forEach(r=>s.appendChild(r)),s}function Bt(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=it(e.left,e.top)}function pt(n,e,t){const s=V(e,n.length-1),r=V(t,n.length-1);if(s===r)return;const o=n[s],a=r<s?-1:1;for(let l=s;l!==r;l+=a)n[l]=n[l+a];n[r]=o}function V(n,e){return Math.max(0,Math.min(e,n))}class _e{constructor(e,t){this._element=e,this._dragDropRegistry=t,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(e){this.withItems(e)}sort(e,t,s,r){const o=this._itemPositions,a=this._getItemIndexFromPointerPosition(e,t,s,r);if(-1===a&&o.length>0)return null;const l="horizontal"===this.orientation,c=o.findIndex(x=>x.drag===e),h=o[a],f=h.clientRect,D=c>a?1:-1,k=this._getItemOffsetPx(o[c].clientRect,f,D),E=this._getSiblingOffsetPx(c,o,D),J=o.slice();return pt(o,c,a),o.forEach((x,hi)=>{if(J[hi]===x)return;const ne=x.drag===e,yt=ne?k:E,oe=ne?e.getPlaceholderElement():x.drag.getRootElement();x.offset+=yt,l?(oe.style.transform=tt(`translate3d(${Math.round(x.offset)}px, 0, 0)`,x.initialTransform),H(x.clientRect,0,yt)):(oe.style.transform=tt(`translate3d(0, ${Math.round(x.offset)}px, 0)`,x.initialTransform),H(x.clientRect,yt,0))}),this._previousSwap.overlaps=ht(f,t,s),this._previousSwap.drag=h.drag,this._previousSwap.delta=l?r.x:r.y,{previousIndex:c,currentIndex:a}}enter(e,t,s,r){const o=null==r||r<0?this._getItemIndexFromPointerPosition(e,t,s):r,a=this._activeDraggables,l=a.indexOf(e),c=e.getPlaceholderElement();let h=a[o];if(h===e&&(h=a[o+1]),!h&&(null==o||-1===o||o<a.length-1)&&this._shouldEnterAsFirstChild(t,s)&&(h=a[0]),l>-1&&a.splice(l,1),h&&!this._dragDropRegistry.isDragging(h)){const u=h.getRootElement();u.parentElement.insertBefore(c,u),a.splice(o,0,e)}else(0,g.fI)(this._element).appendChild(c),a.push(e);c.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables.forEach(e=>{const t=e.getRootElement();if(t){const s=this._itemPositions.find(r=>r.drag===e)?.initialTransform;t.style.transform=s||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(s=>s.drag===e)}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:s})=>{H(s,e,t)}),this._itemPositions.forEach(({drag:s})=>{this._dragDropRegistry.isDragging(s)&&s._sortFromLastPointerPosition()})}_cacheItemPositions(){const e="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(t=>{const s=t.getVisibleElement();return{drag:t,offset:0,initialTransform:s.style.transform||"",clientRect:dt(s)}}).sort((t,s)=>e?t.clientRect.left-s.clientRect.left:t.clientRect.top-s.clientRect.top)}_getItemOffsetPx(e,t,s){const r="horizontal"===this.orientation;let o=r?t.left-e.left:t.top-e.top;return-1===s&&(o+=r?t.width-e.width:t.height-e.height),o}_getSiblingOffsetPx(e,t,s){const r="horizontal"===this.orientation,o=t[e].clientRect,a=t[e+-1*s];let l=o[r?"width":"height"]*s;if(a){const c=r?"left":"top",h=r?"right":"bottom";-1===s?l-=a.clientRect[c]-o[h]:l+=o[c]-a.clientRect[h]}return l}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;const s=this._itemPositions,r="horizontal"===this.orientation;if(s[0].drag!==this._activeDraggables[0]){const a=s[s.length-1].clientRect;return r?e>=a.right:t>=a.bottom}{const a=s[0].clientRect;return r?e<=a.left:t<=a.top}}_getItemIndexFromPointerPosition(e,t,s,r){const o="horizontal"===this.orientation,a=this._itemPositions.findIndex(({drag:l,clientRect:c})=>l!==e&&((!r||l!==this._previousSwap.drag||!this._previousSwap.overlaps||(o?r.x:r.y)!==this._previousSwap.delta)&&(o?t>=Math.floor(c.left)&&t<Math.floor(c.right):s>=Math.floor(c.top)&&s<Math.floor(c.bottom))));return-1!==a&&this._sortPredicate(a,e)?a:-1}}class fe{constructor(e,t,s,r,o){this._dragDropRegistry=t,this._ngZone=r,this._viewportRuler=o,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new p.x,this.entered=new p.x,this.exited=new p.x,this.dropped=new p.x,this.sorted=new p.x,this.receivingStarted=new p.x,this.receivingStopped=new p.x,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=Q.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new p.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function ce(n=0,e=ae.z){return n<0&&(n=0),(0,le.H)(n,n,e)}(0,de.Z).pipe((0,P.R)(this._stopScrollTimers)).subscribe(()=>{const a=this._scrollNode,l=this.autoScrollStep;1===this._verticalScrollDirection?a.scrollBy(0,-l):2===this._verticalScrollDirection&&a.scrollBy(0,l),1===this._horizontalScrollDirection?a.scrollBy(-l,0):2===this._horizontalScrollDirection&&a.scrollBy(l,0)})},this.element=(0,g.fI)(e),this._document=s,this.withScrollableParents([this.element]),t.registerDropContainer(this),this._parentPositions=new kt(s),this._sortStrategy=new _e(this.element,t),this._sortStrategy.withSortPredicate((a,l)=>this.sortPredicate(a,l,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,s,r){this._draggingStarted(),null==r&&this.sortingDisabled&&(r=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,s,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,s,r,o,a,l,c={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:s,container:this,previousContainer:r,isPointerOverContainer:o,distance:a,dropPoint:l,event:c})}withItems(e){const t=this._draggables;return this._draggables=e,e.forEach(s=>s._withDropContainer(this)),this.isDragging()&&(t.filter(r=>r.isDragging()).every(r=>-1===e.indexOf(r))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._sortStrategy.direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._sortStrategy.orientation=e,this}withScrollableParents(e){const t=(0,g.fI)(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t,...e]:e.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,s,r){if(this.sortingDisabled||!this._clientRect||!Rt(this._clientRect,.05,t,s))return;const o=this._sortStrategy.sort(e,t,s,r);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let s,r=0,o=0;if(this._parentPositions.positions.forEach((a,l)=>{l===this._document||!a.clientRect||s||Rt(a.clientRect,.05,e,t)&&([r,o]=function be(n,e,t,s){const r=Jt(e,s),o=zt(e,t);let a=0,l=0;if(r){const c=n.scrollTop;1===r?c>0&&(a=1):n.scrollHeight-c>n.clientHeight&&(a=2)}if(o){const c=n.scrollLeft;1===o?c>0&&(l=1):n.scrollWidth-c>n.clientWidth&&(l=2)}return[a,l]}(l,a.clientRect,e,t),(r||o)&&(s=l))}),!r&&!o){const{width:a,height:l}=this._viewportRuler.getViewportSize(),c={width:a,height:l,top:0,right:a,bottom:l,left:0};r=Jt(c,t),o=zt(c,e),s=window}s&&(r!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||s!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=o,this._scrollNode=s,(r||o)&&s?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const e=(0,g.fI)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const e=(0,g.fI)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}_reset(){this._isDragging=!1;const e=(0,g.fI)(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(e,t){return null!=this._clientRect&&ht(this._clientRect,e,t)}_getSiblingContainerFromPosition(e,t,s){return this._siblings.find(r=>r._canReceive(e,t,s))}_canReceive(e,t,s){if(!this._clientRect||!ht(this._clientRect,t,s)||!this.enterPredicate(e,this))return!1;const r=this._getShadowRoot().elementFromPoint(t,s);if(!r)return!1;const o=(0,g.fI)(this.element);return r===o||o.contains(r)}_startReceiving(e,t){const s=this._activeSiblings;!s.has(e)&&t.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(s.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:t}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){const t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const e=(0,T.kV)((0,g.fI)(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}}function Jt(n,e){const{top:t,bottom:s,height:r}=n,o=.05*r;return e>=t-o&&e<=t+o?1:e>=s-o&&e<=s+o?2:0}function zt(n,e){const{left:t,right:s,width:r}=n,o=.05*r;return e>=t-o&&e<=t+o?1:e>=s-o&&e<=s+o?2:0}const st=(0,T.i$)({passive:!1,capture:!0});let ve=(()=>{class n{constructor(t,s){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=r=>r.isDragging(),this.pointerMove=new p.x,this.pointerUp=new p.x,this.scroll=new p.x,this._preventDefaultWhileDragging=r=>{this._activeDragInstances.length>0&&r.preventDefault()},this._persistentTouchmoveListener=r=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&r.preventDefault(),this.pointerMove.next(r))},this._document=s}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,st)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,st)}startDragging(t,s){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){const r=s.type.startsWith("touch");this._globalListeners.set(r?"touchend":"mouseup",{handler:o=>this.pointerUp.next(o),options:!0}).set("scroll",{handler:o=>this.scroll.next(o),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:st}),r||this._globalListeners.set("mousemove",{handler:o=>this.pointerMove.next(o),options:st}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((o,a)=>{this._document.addEventListener(a,o.handler,o.options)})})}}stopDragging(t){const s=this._activeDragInstances.indexOf(t);s>-1&&(this._activeDragInstances.splice(s,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}scrolled(t){const s=[this.scroll];return t&&t!==this._document&&s.push(new Ct.y(r=>this._ngZone.runOutsideAngular(()=>{const a=l=>{this._activeDragInstances.length&&r.next(l)};return t.addEventListener("scroll",a,!0),()=>{t.removeEventListener("scroll",a,!0)}}))),(0,ot.T)(...s)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,s)=>{this._document.removeEventListener(s,t.handler,t.options)}),this._globalListeners.clear()}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(i.R0b),i.LFG(v.K0))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const De={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let gt=(()=>{class n{constructor(t,s,r,o){this._document=t,this._ngZone=s,this._viewportRuler=r,this._dragDropRegistry=o}createDrag(t,s=De){return new ge(t,s,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new fe(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(v.K0),i.LFG(i.R0b),i.LFG(z.rL),i.LFG(ve))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const mt=new i.OlP("CDK_DRAG_PARENT"),_t=new i.OlP("CdkDropListGroup");let Qt=(()=>{class n{constructor(){this._items=new Set,this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=(0,g.Ig)(t)}ngOnDestroy(){this._items.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=i.lG2({type:n,selectors:[["","cdkDropListGroup",""]],inputs:{disabled:["cdkDropListGroupDisabled","disabled"]},exportAs:["cdkDropListGroup"],standalone:!0,features:[i._Bn([{provide:_t,useExisting:n}])]}),n})();const Ht=new i.OlP("CDK_DRAG_CONFIG");let xe=0;const Gt=new i.OlP("CdkDropList");let Vt=(()=>{class n{get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(t){this._dropListRef.disabled=this._disabled=(0,g.Ig)(t)}constructor(t,s,r,o,a,l,c){this.element=t,this._changeDetectorRef=r,this._scrollDispatcher=o,this._dir=a,this._group=l,this._destroyed=new p.x,this.connectedTo=[],this.id="cdk-drop-list-"+xe++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new i.vpe,this.entered=new i.vpe,this.exited=new i.vpe,this.sorted=new i.vpe,this._unsortedItems=new Set,this._dropListRef=s.createDropList(t),this._dropListRef.data=this,c&&this._assignDefaults(c),this._dropListRef.enterPredicate=(h,u)=>this.enterPredicate(h.data,u.data),this._dropListRef.sortPredicate=(h,u,f)=>this.sortPredicate(h,u.data,f.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),n._dropLists.push(this),l&&l._items.add(this)}addItem(t){this._unsortedItems.add(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(t){this._unsortedItems.delete(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((t,s)=>t._dragRef.getVisibleElement().compareDocumentPosition(s._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const t=n._dropLists.indexOf(this);t>-1&&n._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(t){this._dir&&this._dir.change.pipe((0,at.O)(this._dir.value),(0,P.R)(this._destroyed)).subscribe(s=>t.withDirection(s)),t.beforeStarted.subscribe(()=>{const s=(0,g.Eq)(this.connectedTo).map(r=>"string"==typeof r?n._dropLists.find(a=>a.id===r):r);if(this._group&&this._group._items.forEach(r=>{-1===s.indexOf(r)&&s.push(r)}),!this._scrollableParentsResolved){const r=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(o=>o.getElementRef().nativeElement);this._dropListRef.withScrollableParents(r),this._scrollableParentsResolved=!0}t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.sortingDisabled=(0,g.Ig)(this.sortingDisabled),t.autoScrollDisabled=(0,g.Ig)(this.autoScrollDisabled),t.autoScrollStep=(0,g.su)(this.autoScrollStep,2),t.connectedTo(s.filter(r=>r&&r!==this).map(r=>r._dropListRef)).withOrientation(this.orientation)})}_handleEvents(t){t.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(s=>{this.entered.emit({container:this,item:s.item.data,currentIndex:s.currentIndex})}),t.exited.subscribe(s=>{this.exited.emit({container:this,item:s.item.data}),this._changeDetectorRef.markForCheck()}),t.sorted.subscribe(s=>{this.sorted.emit({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:s.item.data})}),t.dropped.subscribe(s=>{this.dropped.emit({previousIndex:s.previousIndex,currentIndex:s.currentIndex,previousContainer:s.previousContainer.data,container:s.container.data,item:s.item.data,isPointerOverContainer:s.isPointerOverContainer,distance:s.distance,dropPoint:s.dropPoint,event:s.event}),this._changeDetectorRef.markForCheck()}),(0,ot.T)(t.receivingStarted,t.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(t){const{lockAxis:s,draggingDisabled:r,sortingDisabled:o,listAutoScrollDisabled:a,listOrientation:l}=t;this.disabled=r??!1,this.sortingDisabled=o??!1,this.autoScrollDisabled=a??!1,this.orientation=l||"vertical",s&&(this.lockAxis=s)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(t=>t._dragRef))}}return n._dropLists=[],n.\u0275fac=function(t){return new(t||n)(i.Y36(i.SBq),i.Y36(gt),i.Y36(i.sBO),i.Y36(z.mF),i.Y36(It.Is,8),i.Y36(_t,12),i.Y36(Ht,8))},n.\u0275dir=i.lG2({type:n,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(t,s){2&t&&(i.uIk("id",s.id),i.ekj("cdk-drop-list-disabled",s.disabled)("cdk-drop-list-dragging",s._dropListRef.isDragging())("cdk-drop-list-receiving",s._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],standalone:!0,features:[i._Bn([{provide:_t,useValue:void 0},{provide:Gt,useExisting:n}])]}),n})();const ft=new i.OlP("CdkDragHandle");let Yt=(()=>{class n{get disabled(){return this._disabled}set disabled(t){this._disabled=(0,g.Ig)(t),this._stateChanges.next(this)}constructor(t,s){this.element=t,this._stateChanges=new p.x,this._disabled=!1,this._parentDrag=s}ngOnDestroy(){this._stateChanges.complete()}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(i.SBq),i.Y36(mt,12))},n.\u0275dir=i.lG2({type:n,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:["cdkDragHandleDisabled","disabled"]},standalone:!0,features:[i._Bn([{provide:ft,useExisting:n}])]}),n})();const $t=new i.OlP("CdkDragPlaceholder"),qt=new i.OlP("CdkDragPreview");let Kt=(()=>{class n{get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(t){this._disabled=(0,g.Ig)(t),this._dragRef.disabled=this._disabled}constructor(t,s,r,o,a,l,c,h,u,f,D){this.element=t,this.dropContainer=s,this._ngZone=o,this._viewContainerRef=a,this._dir=c,this._changeDetectorRef=u,this._selfHandle=f,this._parentDrag=D,this._destroyed=new p.x,this.started=new i.vpe,this.released=new i.vpe,this.ended=new i.vpe,this.entered=new i.vpe,this.exited=new i.vpe,this.dropped=new i.vpe,this.moved=new Ct.y(k=>{const E=this._dragRef.moved.pipe((0,b.U)(J=>({source:this,pointerPosition:J.pointerPosition,event:J.event,delta:J.delta,distance:J.distance}))).subscribe(k);return()=>{E.unsubscribe()}}),this._dragRef=h.createDrag(t,{dragStartThreshold:l&&null!=l.dragStartThreshold?l.dragStartThreshold:5,pointerDirectionChangeThreshold:l&&null!=l.pointerDirectionChangeThreshold?l.pointerDirectionChangeThreshold:5,zIndex:l?.zIndex}),this._dragRef.data=this,n._dragInstances.push(this),l&&this._assignDefaults(l),s&&(this._dragRef._withDropContainer(s._dropListRef),s.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,y.q)(1),(0,P.R)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(t){const s=t.rootElementSelector,r=t.freeDragPosition;s&&!s.firstChange&&this._updateRootElement(),r&&!r.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const t=n._dragInstances.indexOf(this);t>-1&&n._dragInstances.splice(t,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const t=this.element.nativeElement;let s=t;this.rootElementSelector&&(s=void 0!==t.closest?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(s||t)}_getBoundaryElement(){const t=this.boundaryElement;return t?"string"==typeof t?this.element.nativeElement.closest(t):(0,g.fI)(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){const s=this._dir,r=this.dragStartDelay,o=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,a=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.dragStartDelay="object"==typeof r&&r?r:(0,g.su)(r),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(a).withPreviewContainer(this.previewContainer||"global"),s&&t.withDirection(s.value)}}),t.beforeStarted.pipe((0,y.q)(1)).subscribe(()=>{if(this._parentDrag)return void t.withParent(this._parentDrag._dragRef);let s=this.element.nativeElement.parentElement;for(;s;){if(s.classList.contains("cdk-drag")){t.withParent(n._dragInstances.find(r=>r.element.nativeElement===s)?._dragRef||null);break}s=s.parentElement}})}_handleEvents(t){t.started.subscribe(s=>{this.started.emit({source:this,event:s.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(s=>{this.released.emit({source:this,event:s.event})}),t.ended.subscribe(s=>{this.ended.emit({source:this,distance:s.distance,dropPoint:s.dropPoint,event:s.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(s=>{this.entered.emit({container:s.container.data,item:this,currentIndex:s.currentIndex})}),t.exited.subscribe(s=>{this.exited.emit({container:s.container.data,item:this})}),t.dropped.subscribe(s=>{this.dropped.emit({previousIndex:s.previousIndex,currentIndex:s.currentIndex,previousContainer:s.previousContainer.data,container:s.container.data,isPointerOverContainer:s.isPointerOverContainer,item:this,distance:s.distance,dropPoint:s.dropPoint,event:s.event})})}_assignDefaults(t){const{lockAxis:s,dragStartDelay:r,constrainPosition:o,previewClass:a,boundaryElement:l,draggingDisabled:c,rootElementSelector:h,previewContainer:u}=t;this.disabled=c??!1,this.dragStartDelay=r||0,s&&(this.lockAxis=s),o&&(this.constrainPosition=o),a&&(this.previewClass=a),l&&(this.boundaryElement=l),h&&(this.rootElementSelector=h),u&&(this.previewContainer=u)}_setupHandlesListener(){this._handles.changes.pipe((0,at.O)(this._handles),(0,S.b)(t=>{const s=t.filter(r=>r._parentDrag===this).map(r=>r.element);this._selfHandle&&this.rootElementSelector&&s.push(this.element),this._dragRef.withHandles(s)}),(0,C.w)(t=>(0,ot.T)(...t.map(s=>s._stateChanges.pipe((0,at.O)(s))))),(0,P.R)(this._destroyed)).subscribe(t=>{const s=this._dragRef,r=t.element.nativeElement;t.disabled?s.disableHandle(r):s.enableHandle(r)})}}return n._dragInstances=[],n.\u0275fac=function(t){return new(t||n)(i.Y36(i.SBq),i.Y36(Gt,12),i.Y36(v.K0),i.Y36(i.R0b),i.Y36(i.s_b),i.Y36(Ht,8),i.Y36(It.Is,8),i.Y36(gt),i.Y36(i.sBO),i.Y36(ft,10),i.Y36(mt,12))},n.\u0275dir=i.lG2({type:n,selectors:[["","cdkDrag",""]],contentQueries:function(t,s,r){if(1&t&&(i.Suo(r,qt,5),i.Suo(r,$t,5),i.Suo(r,ft,5)),2&t){let o;i.iGM(o=i.CRH())&&(s._previewTemplate=o.first),i.iGM(o=i.CRH())&&(s._placeholderTemplate=o.first),i.iGM(o=i.CRH())&&(s._handles=o)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,s){2&t&&i.ekj("cdk-drag-disabled",s.disabled)("cdk-drag-dragging",s._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[i._Bn([{provide:mt,useExisting:n}]),i.TTD]}),n})(),Ce=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({providers:[gt],imports:[z.ZD]}),n})();var I=d(4859),jt=d(6709),bt=d(5938),A=d(3238),O=d(9602),vt=d(9549),Z=d(7392),Wt=d(284),m=d(1837);const Xt=new i.OlP("MAT_LUXON_DATE_ADAPTER_OPTIONS",{providedIn:"root",factory:function Ie(){return{useUtc:!1,firstDayOfWeek:0}}});let Pe=(()=>{class n extends A._A{constructor(t,s){super(),this._useUTC=!!s?.useUtc,this._firstDayOfWeek=s?.firstDayOfWeek||0,this.setLocale(t||m.ou.local().locale)}getYear(t){return t.year}getMonth(t){return t.month-1}getDate(t){return t.day}getDayOfWeek(t){return t.weekday}getMonthNames(t){return m.kI.months(t,{locale:this.locale})}getDateNames(){const t=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return function Te(n,e){const t=Array(n);for(let s=0;s<n;s++)t[s]=e(s);return t}(31,s=>t.format(m.ou.utc(2017,1,s+1).toJSDate()))}getDayOfWeekNames(t){const s=m.kI.weekdays(t,{locale:this.locale});return s.unshift(s.pop()),s}getYearName(t){return t.toFormat("yyyy")}getFirstDayOfWeek(){return this._firstDayOfWeek}getNumDaysInMonth(t){return t.daysInMonth}clone(t){return m.ou.fromObject(t.toObject())}createDate(t,s,r){if(s<0||s>11)throw Error(`Invalid month index "${s}". Month index has to be between 0 and 11.`);if(r<1)throw Error(`Invalid date "${r}". Date has to be greater than 0.`);const o=this._useUTC?m.ou.utc(t,s+1,r):m.ou.local(t,s+1,r);if(!this.isValid(o))throw Error(`Invalid date "${r}". Reason: "${o.invalidReason}".`);return o.setLocale(this.locale)}today(){return(this._useUTC?m.ou.utc():m.ou.local()).setLocale(this.locale)}parse(t,s){const r=this._getOptions();if("string"==typeof t&&t.length>0){const o=m.ou.fromISO(t,r);if(this.isValid(o))return o;const a=Array.isArray(s)?s:[s];if(!s.length)throw Error("Formats array must not be empty.");for(const l of a){const c=m.ou.fromFormat(t,l,r);if(this.isValid(c))return c}return this.invalid()}return"number"==typeof t?m.ou.fromMillis(t,r):t instanceof Date?m.ou.fromJSDate(t,r):t instanceof m.ou?m.ou.fromMillis(t.toMillis(),r):null}format(t,s){if(!this.isValid(t))throw Error("LuxonDateAdapter: Cannot format invalid date.");return t.setLocale(this.locale).setZone(this._useUTC?"utc":void 0).toFormat(s)}addCalendarYears(t,s){return t.plus({years:s}).setLocale(this.locale)}addCalendarMonths(t,s){return t.plus({months:s}).setLocale(this.locale)}addCalendarDays(t,s){return t.plus({days:s}).setLocale(this.locale)}toIso8601(t){return t.toISO()}deserialize(t){const s=this._getOptions();let r;if(t instanceof Date&&(r=m.ou.fromJSDate(t,s)),"string"==typeof t){if(!t)return null;r=m.ou.fromISO(t,s)}return r&&this.isValid(r)?r:super.deserialize(t)}isDateInstance(t){return t instanceof m.ou}isValid(t){return t.isValid}invalid(){return m.ou.invalid("Invalid Luxon DateTime object.")}_getOptions(){return{zone:this._useUTC?"utc":void 0,locale:this.locale}}}return n.\u0275fac=function(t){return new(t||n)(i.LFG(A.Ad,8),i.LFG(Xt,8))},n.\u0275prov=i.Yz7({token:n,factory:n.\u0275fac}),n})();const te={parse:{dateInput:"D"},display:{dateInput:"D",monthYearLabel:"LLL yyyy",dateA11yLabel:"DD",monthYearA11yLabel:"LLLL yyyy"}};let Re=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({providers:[{provide:A._A,useClass:Pe,deps:[A.Ad,Xt]}]}),n})(),ke=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({providers:[{provide:A.sG,useValue:te}],imports:[Re]}),n})();var rt=d(8255),Ee=d(3162),Le=d(4466),Dt=d(1135),xt=d(2843),Ae=d(9646);class ee{constructor(e){this.id=e.id||null,this.title=e.title,this.description=e.description||null,this.icon=e.icon||null,this.lastActivity=e.lastActivity||null,this.lists=[],this.labels=[],this.members=[],e.lists&&(this.lists=e.lists.map(t=>t instanceof F?t:new F(t))),e.labels&&(this.labels=e.labels.map(t=>t instanceof nt?t:new nt(t))),e.members&&(this.members=e.members.map(t=>t instanceof ie?t:new ie(t)))}}class F{constructor(e){this.id=e.id||null,this.boardId=e.boardId,this.position=e.position,this.title=e.title,this.cards=[],e.cards&&(this.cards=e.cards.map(t=>t instanceof Y?t:new Y(t)))}}class Y{constructor(e){this.id=e.id||null,this.boardId=e.boardId,this.listId=e.listId,this.position=e.position,this.title=e.title,this.description=e.description||null,this.labels=[],this.dueDate=e.dueDate||null,e.labels&&(this.labels=e.labels.map(t=>t instanceof nt?t:new nt(t)))}}class ie{constructor(e){this.id=e.id||null,this.name=e.name,this.avatar=e.avatar||null}}class nt{constructor(e){this.id=e.id||null,this.boardId=e.boardId,this.title=e.title}}var Oe=d(529);class w{constructor(e){this._httpClient=e,this._board=new Dt.X(null),this._boards=new Dt.X(null),this._card=new Dt.X(null)}get board$(){return this._board.asObservable()}get boards$(){return this._boards.asObservable()}get card$(){return this._card.asObservable()}getBoards(){return this._httpClient.get("api/apps/scrumboard/boards").pipe((0,b.U)(e=>e.map(t=>new ee(t))),(0,S.b)(e=>this._boards.next(e)))}getBoard(e){return this._httpClient.get("api/apps/scrumboard/board",{params:{id:e}}).pipe((0,b.U)(t=>new ee(t)),(0,S.b)(t=>this._board.next(t)))}createBoard(e){return this.boards$.pipe((0,y.q)(1),(0,C.w)(t=>this._httpClient.put("api/apps/scrumboard/board",{board:e}).pipe((0,b.U)(s=>(this._boards.next([...t,s]),s)))))}updateBoard(e,t){return this.boards$.pipe((0,y.q)(1),(0,C.w)(s=>this._httpClient.patch("api/apps/scrumboard/board",{id:e,board:t}).pipe((0,b.U)(r=>{const o=s.findIndex(a=>a.id===e);return s[o]=r,this._boards.next(s),r}))))}deleteBoard(e){return this.boards$.pipe((0,y.q)(1),(0,C.w)(t=>this._httpClient.delete("api/apps/scrumboard/board",{params:{id:e}}).pipe((0,b.U)(s=>{const r=t.findIndex(o=>o.id===e);return t.splice(r,1),this._boards.next(t),this._board.next(null),this._card.next(null),s}))))}createList(e){return this._httpClient.post("api/apps/scrumboard/board/list",{list:e}).pipe((0,b.U)(t=>new F(t)),(0,S.b)(t=>{const s=this._board.value;s.lists=[...s.lists,t],s.lists.sort((r,o)=>r.position-o.position),this._board.next(s)}))}updateList(e){return this._httpClient.patch("api/apps/scrumboard/board/list",{list:e}).pipe((0,b.U)(t=>new F(t)),(0,S.b)(t=>{const s=this._board.value,r=s.lists.findIndex(o=>o.id===e.id);s.lists[r]=t,s.lists.sort((o,a)=>o.position-a.position),this._board.next(s)}))}updateLists(e){return this._httpClient.patch("api/apps/scrumboard/board/lists",{lists:e}).pipe((0,b.U)(t=>t.map(s=>new F(s))),(0,S.b)(t=>{const s=this._board.value;t.forEach(r=>{const o=s.lists.findIndex(a=>a.id===r.id);s.lists[o]=r}),s.lists.sort((r,o)=>r.position-o.position),this._board.next(s)}))}deleteList(e){return this._httpClient.delete("api/apps/scrumboard/board/list",{params:{id:e}}).pipe((0,S.b)(t=>{const s=this._board.value,r=s.lists.findIndex(o=>o.id===e);s.lists.splice(r,1),s.lists.sort((o,a)=>o.position-a.position),this._board.next(s)}))}getCard(e){return this._board.pipe((0,y.q)(1),(0,b.U)(t=>{const s=t.lists.find(r=>r.cards.some(o=>o.id===e)).cards.find(r=>r.id===e);return this._card.next(s),s}),(0,C.w)(t=>t?(0,Ae.of)(t):(0,xt._)("Could not found the card with id of "+e+"!")))}createCard(e){return this._httpClient.put("api/apps/scrumboard/board/card",{card:e}).pipe((0,b.U)(t=>new Y(t)),(0,S.b)(t=>{const s=this._board.value;return s.lists.forEach((r,o,a)=>{r.id===t.listId&&a[o].cards.push(t)}),this._board.next(s),t}))}updateCard(e,t){return this.board$.pipe((0,y.q)(1),(0,C.w)(s=>this._httpClient.patch("api/apps/scrumboard/board/card",{id:e,card:t}).pipe((0,b.U)(r=>(s.lists.forEach(o=>{o.cards.forEach((a,l,c)=>{a.id===e&&(c[l]=r)})}),this._board.next(s),this._card.next(r),r)))))}updateCards(e){return this._httpClient.patch("api/apps/scrumboard/board/cards",{cards:e}).pipe((0,b.U)(t=>t.map(s=>new Y(s))),(0,S.b)(t=>{const s=this._board.value;t.forEach(r=>{const o=s.lists.findIndex(l=>l.id===r.listId),a=s.lists[o].cards.findIndex(l=>l.id===r.id);s.lists[o].cards[a]=r,s.lists[o].cards.sort((l,c)=>l.position-c.position)}),this._board.next(s)}))}deleteCard(e){return this.board$.pipe((0,y.q)(1),(0,C.w)(t=>this._httpClient.delete("api/apps/scrumboard/board/card",{params:{id:e}}).pipe((0,b.U)(s=>(t.lists.forEach(r=>{r.cards.forEach((o,a,l)=>{o.id===e&&l.splice(a,1)})}),this._board.next(t),this._card.next(null),s)))))}updateCardPositions(e){}createLabel(e){return this.board$.pipe((0,y.q)(1),(0,C.w)(t=>this._httpClient.post("api/apps/scrumboard/board/label",{label:e}).pipe((0,b.U)(s=>(t.labels=[...t.labels,s],this._board.next(t),s)))))}updateLabel(e,t){return this.board$.pipe((0,y.q)(1),(0,C.w)(s=>this._httpClient.patch("api/apps/scrumboard/board/label",{id:e,label:t}).pipe((0,b.U)(r=>{const o=s.labels.findIndex(a=>a.id===e);return s.labels[o]=r,this._board.next(s),r}))))}deleteLabel(e){return this.board$.pipe((0,y.q)(1),(0,C.w)(t=>this._httpClient.delete("api/apps/scrumboard/board/label",{params:{id:e}}).pipe((0,b.U)(s=>{const r=t.labels.findIndex(o=>o.id===e);return t.labels.splice(r,1),s&&t.lists.forEach(o=>{o.cards.forEach(a=>{const l=a.labels.findIndex(c=>c.id===e);l>-1&&a.labels.splice(l,1)})}),this._board.next(t),s}))))}search(e){return this._httpClient.get("api/apps/scrumboard/board/search",{params:{query:e}})}}function Ze(n,e){if(1&n&&(i.ynx(0),i._UZ(1,"img",18),i.BQk()),2&n){const t=e.$implicit;i.xp6(1),i.Q6J("src",t.avatar,i.LSH)}}function Fe(n,e){if(1&n&&(i.ynx(0),i.TgZ(1,"div",19)(2,"div",20),i._uU(3),i.qZA()(),i.BQk()),2&n){const t=i.oxw(2).$implicit;i.xp6(3),i.hij(" +",t.members.slice(5).length," ")}}function Me(n,e){if(1&n&&(i.ynx(0),i._UZ(1,"div",16),i.TgZ(2,"div",17),i.YNc(3,Ze,2,1,"ng-container",4),i.YNc(4,Fe,4,1,"ng-container",12),i.qZA(),i.BQk()),2&n){const t=i.oxw().$implicit,s=i.oxw();i.xp6(3),i.Q6J("ngForOf",t.members.slice(0,5))("ngForTrackBy",s.trackByFn),i.xp6(1),i.Q6J("ngIf",t.members.length>5)}}w.\u0275fac=function(e){return new(e||w)(i.LFG(Oe.eN))},w.\u0275prov=i.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"});const Be=function(n){return[n]};function Ue(n,e){if(1&n&&(i.ynx(0),i.TgZ(1,"a",7)(2,"div",8),i._UZ(3,"mat-icon",9),i.qZA(),i.TgZ(4,"div",10),i._uU(5),i.qZA(),i.TgZ(6,"div",11),i._uU(7),i.qZA(),i.YNc(8,Me,5,3,"ng-container",12),i.TgZ(9,"div",13)(10,"div",14),i._uU(11,"Edited:"),i.qZA(),i.TgZ(12,"div",15),i._uU(13),i.qZA()()(),i.BQk()),2&n){const t=e.$implicit,s=i.oxw();i.xp6(1),i.Q6J("routerLink",i.VKq(6,Be,t.id)),i.xp6(2),i.Q6J("svgIcon",t.icon),i.xp6(2),i.Oqu(t.title),i.xp6(2),i.Oqu(t.description),i.xp6(1),i.Q6J("ngIf",null==t.members?null:t.members.length),i.xp6(5),i.Oqu(s.formatDateAsRelative(t.lastActivity))}}class ${constructor(e,t){this._changeDetectorRef=e,this._scrumboardService=t,this._unsubscribeAll=new p.x}ngOnInit(){this._scrumboardService.boards$.pipe((0,P.R)(this._unsubscribeAll)).subscribe(e=>{this.boards=e,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}formatDateAsRelative(e){return m.ou.fromISO(e).toRelative()}trackByFn(e,t){return t.id||e}}$.\u0275fac=function(e){return new(e||$)(i.Y36(i.sBO),i.Y36(w))},$.\u0275cmp=i.Xpm({type:$,selectors:[["scrumboard-boards"]],decls:8,vars:3,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-auto","items-center","p-6","sm:p-10"],[1,"mt-4","md:mt-24","text-3xl","md:text-6xl","font-extrabold","tracking-tight","leading-7","sm:leading-10"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-4","mt-8","md:mt-16"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","flex-col","items-center","justify-center","w-56","rounded-lg","cursor-pointer","border-2","border-gray-300","border-dashed","hover:bg-hover","transition-colors","duration-150","ease-in-out"],[1,"icon-size-12","text-hint",3,"svgIcon"],[1,"flex","flex-col","items-start","w-56","p-6","rounded-lg","shadow","bg-card","rounded-lg","hover:shadow-xl","transition-shadow","duration-150","ease-in-out",3,"routerLink"],[1,"flex","items-center","justify-center","p-4","rounded-full","bg-primary-50","text-primary-700","dark:bg-primary","dark:text-on-primary"],[1,"text-current",3,"svgIcon"],[1,"mt-5","text-lg","font-medium","leading-5"],[1,"mt-0.5","line-clamp-2","text-secondary"],[4,"ngIf"],[1,"flex","items-center","mt-4","text-md","font-md"],[1,"text-secondary"],[1,"ml-1"],[1,"w-12","h-1","mt-6","border-t-2"],[1,"flex","items-center","mt-6","-space-x-1.5"],["alt","Member avatar",1,"flex-0","w-8","h-8","rounded-full","ring","ring-offset-1","ring-bg-card","ring-offset-transparent","object-cover",3,"src"],[1,"flex","flex-0","items-center","justify-center","w-8","h-8","rounded-full","ring","ring-offset-1","ring-bg-card","ring-offset-transparent","bg-gray-200","text-gray-500"],[1,"text-md","font-semibold"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2),i._uU(3," Scrumboard Boards "),i.qZA(),i.TgZ(4,"div",3),i.YNc(5,Ue,14,8,"ng-container",4),i.TgZ(6,"div",5),i._UZ(7,"mat-icon",6),i.qZA()()()()),2&e&&(i.xp6(5),i.Q6J("ngForOf",t.boards)("ngForTrackBy",t.trackByFn),i.xp6(2),i.Q6J("svgIcon","heroicons_outline:plus"))},dependencies:[R.rH,z.PQ,Z.Hw,v.sg,v.O5],encapsulation:2,changeDetection:0});var se=d(262);class M{constructor(e){this._scrumboardService=e}resolve(e,t){return this._scrumboardService.getBoards()}}M.\u0275fac=function(e){return new(e||M)(i.LFG(w))},M.\u0275prov=i.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"});class B{constructor(e,t){this._router=e,this._scrumboardService=t}resolve(e,t){return this._scrumboardService.getBoard(e.paramMap.get("boardId")).pipe((0,se.K)(s=>{console.error(s);const r=t.url.split("/").slice(0,-1).join("/");return this._router.navigateByUrl(r),(0,xt._)(s)}))}}B.\u0275fac=function(e){return new(e||B)(i.LFG(R.F0),i.LFG(w))},B.\u0275prov=i.Yz7({token:B,factory:B.\u0275fac,providedIn:"root"});class U{constructor(e,t){this._router=e,this._scrumboardService=t}resolve(e,t){return this._scrumboardService.getCard(e.paramMap.get("cardId")).pipe((0,se.K)(s=>{console.error(s);const r=t.url.split("/").slice(0,-1).join("/");return this._router.navigateByUrl(r),(0,xt._)(s)}))}}U.\u0275fac=function(e){return new(e||U)(i.LFG(R.F0),i.LFG(w))},U.\u0275prov=i.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"});var _=d(4006),Ne=d(7401),re=d(9349);const Je=["titleInput"],ze=["titleAutosize"],Qe=function(n){return{"opacity-0 pointer-events-none":n}},He=function(n){return{"opacity-0":n}};class q{constructor(e,t){this._changeDetectorRef=e,this._formBuilder=t,this.buttonTitle="Add a card",this.saved=new i.vpe,this.formVisible=!1}ngOnInit(){this.form=this._formBuilder.group({title:[""]})}save(){const e=this.form.get("title").value;!e||""===e.trim()||(this.saved.next(e.trim()),this.formVisible=!1,this.form.get("title").setValue(""),setTimeout(()=>{this.titleInput.nativeElement.value="",this.titleAutosize.reset()}),this._changeDetectorRef.markForCheck())}toggleFormVisibility(){this.formVisible=!this.formVisible,this.formVisible&&this.titleInput.nativeElement.focus()}}q.\u0275fac=function(e){return new(e||q)(i.Y36(i.sBO),i.Y36(_.QS))},q.\u0275cmp=i.Xpm({type:q,selectors:[["scrumboard-board-add-card"]],viewQuery:function(e,t){if(1&e&&(i.Gf(Je,5),i.Gf(ze,5)),2&e){let s;i.iGM(s=i.CRH())&&(t.titleInput=s.first),i.iGM(s=i.CRH())&&(t.titleAutosize=s.first)}},inputs:{buttonTitle:"buttonTitle"},outputs:{saved:"saved"},decls:17,vars:18,consts:[[1,"p-3","pt-0"],[1,"relative","flex","w-full","h-full","rounded-lg"],["mat-button","","disableRipple","",1,"absolute","inset-0","justify-start","w-full","rounded-lg",3,"ngClass","click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2","text-secondary"],[1,"flex","flex-col","items-start","w-full",3,"ngClass","formGroup"],[1,"flex","w-full","p-5","rounded-lg","shadow","bg-card"],["cdkTextareaAutosize","",1,"w-full","text-lg","font-medium","leading-5",3,"spellcheck","formControlName","placeholder","keydown.enter"],["titleInput","","titleAutosize","cdkTextareaAutosize"],[1,"flex","items-center","mt-2"],["mat-flat-button","",1,"h-8","min-h-8",3,"color","type","click"],["mat-icon-button","",1,"ml-1","w-8","h-8","min-h-8",3,"type","click"],[1,"icon-size-4",3,"svgIcon"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"button",2),i.NdJ("click",function(){return t.toggleFormVisibility()}),i._UZ(3,"mat-icon",3),i.TgZ(4,"span",4),i._uU(5),i.qZA()(),i.TgZ(6,"form",5)(7,"div",6)(8,"textarea",7,8),i.NdJ("keydown.enter",function(){return t.save()}),i._uU(11,"                "),i.qZA()(),i.TgZ(12,"div",9)(13,"button",10),i.NdJ("click",function(){return t.save()}),i._uU(14," Add card "),i.qZA(),i.TgZ(15,"button",11),i.NdJ("click",function(){return t.toggleFormVisibility()}),i._UZ(16,"mat-icon",12),i.qZA()()()()()),2&e&&(i.ekj("h-13",!t.formVisible),i.xp6(2),i.Q6J("ngClass",i.VKq(14,Qe,t.formVisible)),i.xp6(1),i.Q6J("svgIcon","heroicons_outline:plus-circle"),i.xp6(2),i.Oqu(t.buttonTitle),i.xp6(1),i.Q6J("ngClass",i.VKq(16,He,!t.formVisible))("formGroup",t.form),i.xp6(2),i.Q6J("spellcheck","off")("formControlName","title")("placeholder","Enter card title..."),i.xp6(5),i.Q6J("color","primary")("type","button"),i.xp6(2),i.Q6J("type","button"),i.xp6(1),i.Q6J("svgIcon","heroicons_solid:x"))},dependencies:[I.lW,I.RK,Z.Hw,re.IC,v.mk,_._Y,_.Fj,_.JJ,_.JL,_.sg,_.u],encapsulation:2,changeDetection:0});const Ge=["titleInput"],Ve=function(n){return{"opacity-0 pointer-events-none":n}},Ye=function(n){return{"opacity-0":n}};class K{constructor(e,t){this._changeDetectorRef=e,this._formBuilder=t,this.buttonTitle="Add a list",this.saved=new i.vpe,this.formVisible=!1}ngOnInit(){this.form=this._formBuilder.group({title:[""]})}save(){const e=this.form.get("title").value;!e||""===e.trim()||(this.saved.next(e.trim()),this.form.get("title").setValue(""),this.formVisible=!1,this._changeDetectorRef.markForCheck())}toggleFormVisibility(){this.formVisible=!this.formVisible,this.formVisible&&this.titleInput.nativeElement.focus()}}function $e(n,e){if(1&n&&(i.ynx(0),i.TgZ(1,"div",30),i._UZ(2,"img",31),i.qZA(),i.BQk()),2&n){const t=i.oxw().$implicit;i.xp6(2),i.Q6J("src",t.coverImage,i.LSH)}}function qe(n,e){if(1&n&&(i.ynx(0),i.TgZ(1,"div",33),i._uU(2),i.qZA(),i.BQk()),2&n){const t=e.$implicit;i.xp6(2),i.hij(" ",t.title," ")}}function Ke(n,e){if(1&n&&(i.ynx(0),i.TgZ(1,"div")(2,"div",32),i.YNc(3,qe,3,1,"ng-container",12),i.qZA()(),i.BQk()),2&n){const t=i.oxw().$implicit,s=i.oxw(2);i.xp6(3),i.Q6J("ngForOf",t.labels)("ngForTrackBy",s.trackByFn)}}K.\u0275fac=function(e){return new(e||K)(i.Y36(i.sBO),i.Y36(_.QS))},K.\u0275cmp=i.Xpm({type:K,selectors:[["scrumboard-board-add-list"]],viewQuery:function(e,t){if(1&e&&i.Gf(Ge,5),2&e){let s;i.iGM(s=i.CRH())&&(t.titleInput=s.first)}},inputs:{buttonTitle:"buttonTitle"},outputs:{saved:"saved"},decls:14,vars:18,consts:[[1,"mt-11","w-64","py-2.5","px-2"],[1,"relative","flex","w-full","h-full","overflow-hidden","rounded-xl","bg-gray-200","dark:bg-gray-700"],["mat-button","","disableRipple","",1,"absolute","inset-0","justify-start","w-full","px-3","rounded-xl","bg-transparent",3,"ngClass","click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2","text-secondary"],[1,"flex","flex-col","items-start","w-full","p-3",3,"ngClass","formGroup"],[1,"w-full","py-2","px-3","leading-5","rounded-md","shadow-sm","border","border-gray-300","bg-white","focus:border-primary","dark:border-gray-500","dark:focus:border-primary","dark:bg-black","dark:bg-opacity-5",3,"autocomplete","formControlName","placeholder","keydown.enter"],["titleInput",""],[1,"flex","items-center","mt-2"],["mat-flat-button","",1,"h-8","min-h-8",3,"color","type","click"],["mat-icon-button","",1,"ml-1","w-8","h-8","min-h-8",3,"type","click"],[1,"icon-size-4",3,"svgIcon"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"button",2),i.NdJ("click",function(){return t.toggleFormVisibility()}),i._UZ(3,"mat-icon",3),i.TgZ(4,"span",4),i._uU(5),i.qZA()(),i.TgZ(6,"form",5)(7,"input",6,7),i.NdJ("keydown.enter",function(){return t.save()}),i.qZA(),i.TgZ(9,"div",8)(10,"button",9),i.NdJ("click",function(){return t.save()}),i._uU(11," Add list "),i.qZA(),i.TgZ(12,"button",10),i.NdJ("click",function(){return t.toggleFormVisibility()}),i._UZ(13,"mat-icon",11),i.qZA()()()()()),2&e&&(i.ekj("h-15",!t.formVisible),i.xp6(2),i.Q6J("ngClass",i.VKq(14,Ve,t.formVisible)),i.xp6(1),i.Q6J("svgIcon","heroicons_outline:plus-circle"),i.xp6(2),i.Oqu(t.buttonTitle),i.xp6(1),i.Q6J("ngClass",i.VKq(16,Ye,!t.formVisible))("formGroup",t.form),i.xp6(1),i.Q6J("autocomplete","off")("formControlName","title")("placeholder","Enter list title..."),i.xp6(3),i.Q6J("color","primary")("type","button"),i.xp6(2),i.Q6J("type","button"),i.xp6(1),i.Q6J("svgIcon","heroicons_solid:x"))},dependencies:[I.lW,I.RK,Z.Hw,v.mk,_._Y,_.Fj,_.JJ,_.JL,_.sg,_.u],encapsulation:2,changeDetection:0});const je=function(n){return{"text-red-600":n}};function We(n,e){if(1&n&&(i.ynx(0),i.TgZ(1,"div",34),i._UZ(2,"mat-icon",35),i.TgZ(3,"div",21),i._uU(4),i.ALo(5,"date"),i.qZA()(),i.BQk()),2&n){const t=i.oxw().$implicit,s=i.oxw(2);i.xp6(1),i.Q6J("ngClass",i.VKq(6,je,s.isOverdue(t.dueDate))),i.xp6(1),i.Q6J("svgIcon","heroicons_outline:clock"),i.xp6(2),i.hij(" ",i.xi3(5,3,t.dueDate,"longDate")," ")}}const Xe=function(n){return["card",n]};function ti(n,e){if(1&n&&(i.ynx(0),i.TgZ(1,"a",27),i.YNc(2,$e,3,1,"ng-container",28),i.TgZ(3,"div",29),i._uU(4),i.qZA(),i.YNc(5,Ke,4,2,"ng-container",28),i.YNc(6,We,6,8,"ng-container",28),i.qZA(),i.BQk()),2&n){const t=e.$implicit;i.xp6(1),i.Q6J("routerLink",i.VKq(5,Xe,t.id)),i.xp6(1),i.Q6J("ngIf",t.coverImage),i.xp6(2),i.Oqu(t.title),i.xp6(1),i.Q6J("ngIf",t.labels.length),i.xp6(1),i.Q6J("ngIf",t.dueDate)}}function ei(n,e){if(1&n){const t=i.EpF();i.ynx(0),i.TgZ(1,"div",15)(2,"div",16)(3,"div",17)(4,"input",18,19),i.NdJ("focusout",function(r){const a=i.CHM(t).$implicit,l=i.oxw();return i.KtG(l.updateListTitle(r,a))})("keydown.enter",function(){i.CHM(t);const r=i.MAs(5);return i.KtG(r.blur())}),i.qZA()(),i.TgZ(6,"div",20),i._uU(7),i.qZA(),i.TgZ(8,"div",21)(9,"button",22),i._UZ(10,"mat-icon",6),i.qZA(),i.TgZ(11,"mat-menu",null,23)(13,"button",24),i.NdJ("click",function(){i.CHM(t);const r=i.MAs(5),o=i.oxw();return i.KtG(o.renameList(r))}),i._UZ(14,"mat-icon",6),i._uU(15," Rename list "),i.qZA(),i.TgZ(16,"button",24),i.NdJ("click",function(){const o=i.CHM(t).$implicit,a=i.oxw();return i.KtG(a.deleteList(o.id))}),i._UZ(17,"mat-icon",6),i._uU(18," Delete list "),i.qZA()()()(),i.TgZ(19,"div",25)(20,"div",26),i.NdJ("cdkDropListDropped",function(r){i.CHM(t);const o=i.oxw();return i.KtG(o.cardDropped(r))}),i.YNc(21,ti,7,7,"ng-container",12),i.qZA(),i.TgZ(22,"scrumboard-board-add-card",13),i.NdJ("saved",function(r){const a=i.CHM(t).$implicit,l=i.oxw();return i.KtG(l.addCard(a,r))}),i.qZA()()(),i.BQk()}if(2&n){const t=e.$implicit,s=i.MAs(12),r=i.oxw();i.xp6(1),i.Q6J("cdkDragLockAxis","x"),i.xp6(3),i.Q6J("spellcheck","false")("value",t.title),i.xp6(3),i.hij(" ",t.cards.length," "),i.xp6(2),i.Q6J("matMenuTriggerFor",s),i.xp6(1),i.Q6J("svgIcon","heroicons_solid:dots-vertical"),i.xp6(4),i.Q6J("svgIcon","heroicons_solid:pencil-alt"),i.xp6(3),i.Q6J("svgIcon","heroicons_solid:trash"),i.xp6(3),i.Q6J("id",t.id)("cdkDropListData",t.cards),i.xp6(1),i.Q6J("ngForOf",t.cards)("ngForTrackBy",r.trackByFn),i.xp6(1),i.Q6J("buttonTitle",t.cards.length?"Add another card":"Add a card")}}const ii=function(){return[".."]};class j{constructor(e,t,s,r){this._changeDetectorRef=e,this._formBuilder=t,this._fuseConfirmationService=s,this._scrumboardService=r,this._positionStep=65536,this._maxListCount=200,this._maxPosition=500*this._positionStep,this._unsubscribeAll=new p.x}ngOnInit(){this.listTitleForm=this._formBuilder.group({title:[""]}),this._scrumboardService.board$.pipe((0,P.R)(this._unsubscribeAll)).subscribe(e=>{this.board={...e},this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}renameList(e){setTimeout(()=>{e.focus()})}addList(e){if(this.board.lists.length>=this._maxListCount)return;const t=new F({boardId:this.board.id,position:this.board.lists.length?this.board.lists[this.board.lists.length-1].position+this._positionStep:this._positionStep,title:e});this._scrumboardService.createList(t).subscribe()}updateListTitle(e,t){const s=e.target,r=s.value;r&&""!==r.trim()?(t.title=s.value=r.trim(),this._scrumboardService.updateList(t).subscribe()):s.value=t.title}deleteList(e){this._fuseConfirmationService.open({title:"Delete list",message:"Are you sure you want to delete this list and its cards? This action cannot be undone!",actions:{confirm:{label:"Delete"}}}).afterClosed().subscribe(s=>{"confirmed"===s&&this._scrumboardService.deleteList(e).subscribe()})}addCard(e,t){const s=new Y({boardId:this.board.id,listId:e.id,position:e.cards.length?e.cards[e.cards.length-1].position+this._positionStep:this._positionStep,title:t});this._scrumboardService.createCard(s).subscribe()}listDropped(e){pt(e.container.data,e.previousIndex,e.currentIndex);const t=this._calculatePositions(e);this._scrumboardService.updateLists(t).subscribe()}cardDropped(e){e.previousContainer===e.container?pt(e.container.data,e.previousIndex,e.currentIndex):(function me(n,e,t,s){const r=V(t,n.length-1),o=V(s,e.length);n.length&&e.splice(o,0,n.splice(r,1)[0])}(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),e.container.data[e.currentIndex].listId=e.container.id);const t=this._calculatePositions(e);this._scrumboardService.updateCards(t).subscribe()}isOverdue(e){return m.ou.fromISO(e).startOf("day")<m.ou.now().startOf("day")}trackByFn(e,t){return t.id||e}_calculatePositions(e){let t=e.container.data;const s=t[e.currentIndex],r=t[e.currentIndex-1]||null,o=t[e.currentIndex+1]||null;return s.position=r?o?(r.position+o.position)/2:r.position+this._positionStep:o?o.position/2:this._positionStep,!Number.isInteger(s.position)||s.position>=this._maxPosition?(t=t.map((a,l)=>(a.position=(l+1)*this._positionStep,a)),t):[s]}}j.\u0275fac=function(e){return new(e||j)(i.Y36(i.sBO),i.Y36(_.QS),i.Y36(Ne.R),i.Y36(w))},j.\u0275cmp=i.Xpm({type:j,selectors:[["scrumboard-board"]],decls:21,vars:10,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","sm:py-8","sm:px-10","border-b","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"text-3xl","md:text-4xl","font-extrabold","tracking-tight","leading-7","sm:leading-10","truncate"],[1,"flex","shrink-0","items-center","mt-6","sm:mt-0","sm:ml-4"],["mat-stroked-button","",3,"routerLink"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2"],["mat-stroked-button","",1,"ml-3"],["cdkScrollable","",1,"flex-auto","p-6","sm:p-8","sm:pt-4","overflow-y-auto"],["cdkDropList","",1,"flex",3,"cdkDropListData","cdkDropListOrientation","cdkDropListDropped"],["cdkDropListGroup","",1,"flex","items-start"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"buttonTitle","saved"],[1,"absolute","invisible","w-0","h-0","opacity-0","pointer-events-none"],["cdkDrag","",1,"flex-0","w-72","p-2","rounded-2xl","bg-default",3,"cdkDragLockAxis"],["cdkDragHandle","",1,"flex","items-center","justify-between"],[1,"flex","items-center","w-full","py-2","px-3","rounded-md","cursor-text","border","border-transparent","focus-within:bg-white","focus-within:shadow-sm","focus-within:border-primary","dark:focus-within:bg-gray-900"],[1,"w-full","font-medium","leading-5","bg-transparent",3,"spellcheck","value","focusout","keydown.enter"],["listTitleInput",""],[1,"flex","items-center","justify-center","min-w-6","ml-4","text-sm","font-semibold","leading-6","rounded-full","bg-gray-300","text-secondary","dark:bg-gray-700"],[1,"ml-1"],["mat-icon-button","",1,"w-8","h-8","min-h-8",3,"matMenuTriggerFor"],["listMenu","matMenu"],["mat-menu-item","",3,"click"],[1,"mt-2","rounded-xl","bg-gray-400","bg-opacity-12","dark:bg-transparent","dark:border"],["cdkDropList","",1,"p-3","pb-0",3,"id","cdkDropListData","cdkDropListDropped"],["cdkDrag","",1,"flex","flex-col","items-start","mb-3","p-5","space-y-3","shadow","rounded-lg","overflow-hidden","bg-card",3,"routerLink"],[4,"ngIf"],[1,"text-lg","font-medium","leading-5"],[1,"-mx-5","-mt-5","mb-2"],[1,"w-full","object-cover",3,"src"],[1,"flex","flex-wrap","-mx-1","-mb-2"],[1,"mx-1","mb-2","py-0.5","px-3","rounded-full","text-sm","font-medium","text-gray-500","bg-gray-100","dark:text-gray-300","dark:bg-gray-700"],[1,"flex","items-center","rounded","text-sm","font-medium","leading-5","text-secondary",3,"ngClass"],[1,"icon-size-4","text-current",3,"svgIcon"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),i._uU(4),i.qZA()(),i.TgZ(5,"div",4)(6,"a",5),i._UZ(7,"mat-icon",6),i.TgZ(8,"span",7),i._uU(9,"Boards"),i.qZA()(),i.TgZ(10,"button",8),i._UZ(11,"mat-icon",6),i.TgZ(12,"span",7),i._uU(13,"Settings"),i.qZA()()()(),i.TgZ(14,"div",9)(15,"div",10),i.NdJ("cdkDropListDropped",function(r){return t.listDropped(r)}),i.TgZ(16,"div",11),i.YNc(17,ei,23,13,"ng-container",12),i.TgZ(18,"scrumboard-board-add-list",13),i.NdJ("saved",function(r){return t.addList(r)}),i.qZA()()()()(),i.TgZ(19,"div",14),i._UZ(20,"router-outlet"),i.qZA()),2&e&&(i.xp6(4),i.hij(" ",t.board.title," "),i.xp6(2),i.Q6J("routerLink",i.DdM(9,ii)),i.xp6(1),i.Q6J("svgIcon","heroicons_solid:view-boards"),i.xp6(4),i.Q6J("svgIcon","heroicons_solid:cog"),i.xp6(4),i.Q6J("cdkDropListData",t.board.lists)("cdkDropListOrientation","horizontal"),i.xp6(2),i.Q6J("ngForOf",t.board.lists)("ngForTrackBy",t.trackByFn),i.xp6(1),i.Q6J("buttonTitle",t.board.lists.length?"Add another list":"Add a list"))},dependencies:[R.lC,R.rH,z.PQ,Vt,Qt,Kt,Yt,I.zs,I.lW,I.RK,Z.Hw,rt.VK,rt.OP,rt.p6,v.mk,v.sg,v.O5,q,K,v.uU],styles:[".cdk-drag-preview{--tw-shadow: 0 25px 50px -12px rgb(0 0 0 / .25);--tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.cdk-drag-placeholder{opacity:0}.cdk-drag-animating{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging div:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}\n"],encapsulation:2,changeDetection:0});var si=d(8372),ri=d(9858);const ni=["labelInput"];function oi(n,e){if(1&n&&(i.ynx(0),i._uU(1),i.ALo(2,"date"),i.BQk()),2&n){const t=i.oxw();i.xp6(1),i.Oqu(i.xi3(2,1,t.card.dueDate,"longDate"))}}function ai(n,e){1&n&&(i.ynx(0),i._uU(1,"Not set"),i.BQk())}function li(n,e){if(1&n){const t=i.EpF();i.ynx(0),i.TgZ(1,"mat-checkbox",26),i.NdJ("change",function(r){const a=i.CHM(t).$implicit,l=i.oxw();return i.KtG(l.toggleProductTag(a,r))}),i._uU(2),i.qZA(),i.BQk()}if(2&n){const t=e.$implicit,s=i.oxw();i.xp6(1),i.Q6J("color","primary")("checked",s.hasLabel(t)),i.xp6(1),i.hij(" ",t.title," ")}}const ci=function(n,e,t){return{"text-gray-500 bg-gray-100 dark:text-gray-300 dark:bg-gray-700":n,"text-green-800 bg-green-200 dark:text-green-100 dark:bg-green-500":e,"text-red-800 bg-red-200 dark:text-red-100 dark:bg-red-500":t}};class W{constructor(e,t,s,r){this.matDialogRef=e,this._changeDetectorRef=t,this._formBuilder=s,this._scrumboardService=r,this._unsubscribeAll=new p.x}ngOnInit(){this._scrumboardService.board$.pipe((0,P.R)(this._unsubscribeAll)).subscribe(e=>{this.board=e,this.labels=this.filteredLabels=e.labels}),this._scrumboardService.card$.pipe((0,P.R)(this._unsubscribeAll)).subscribe(e=>{this.card=e}),this.cardForm=this._formBuilder.group({id:[""],title:["",_.kI.required],description:[""],labels:[[]],dueDate:[null]}),this.cardForm.setValue({id:this.card.id,title:this.card.title,description:this.card.description,labels:this.card.labels,dueDate:this.card.dueDate}),this.cardForm.valueChanges.pipe((0,S.b)(e=>{this.card=(0,ri.Z)(this.card,e)}),(0,si.b)(300),(0,P.R)(this._unsubscribeAll)).subscribe(e=>{this._scrumboardService.updateCard(e.id,e).subscribe(),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}hasLabel(e){return!!this.card.labels.find(t=>t.id===e.id)}filterLabels(e){const t=e.target.value.toLowerCase();this.filteredLabels=this.labels.filter(s=>s.title.toLowerCase().includes(t))}filterLabelsInputKeyDown(e){if("Enter"!==e.key||0===this.filteredLabels.length)return;const t=this.filteredLabels[0];this.card.labels.find(r=>r.id===t.id)?this.removeLabelFromCard(t):this.addLabelToCard(t)}toggleProductTag(e,t){t.checked?this.addLabelToCard(e):this.removeLabelFromCard(e)}addLabelToCard(e){this.card.labels.unshift(e),this.cardForm.get("labels").patchValue(this.card.labels),this._changeDetectorRef.markForCheck()}removeLabelFromCard(e){this.card.labels.splice(this.card.labels.findIndex(t=>t.id===e.id),1),this.cardForm.get("labels").patchValue(this.card.labels),this._changeDetectorRef.markForCheck()}isOverdue(e){return m.ou.fromISO(e).startOf("day")<m.ou.now().startOf("day")}trackByFn(e,t){return t.id||e}_readAsDataURL(e){return new Promise((t,s)=>{const r=new FileReader;r.onload=()=>{t(r.result)},r.onerror=o=>{s(o)},r.readAsDataURL(e)})}}W.\u0275fac=function(e){return new(e||W)(i.Y36(bt.so),i.Y36(i.sBO),i.Y36(_.QS),i.Y36(w))},W.\u0275cmp=i.Xpm({type:W,selectors:[["scrumboard-card-details"]],viewQuery:function(e,t){if(1&e&&i.Gf(ni,5),2&e){let s;i.iGM(s=i.CRH())&&(t.labelInput=s.first)}},decls:44,vars:27,consts:[[1,"flex","flex-col","flex-auto","md:w-160","md:min-w-160","max-h-160","-m-6","overflow-y-auto"],[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-primary","text-on-primary"],[1,"text-lg","font-medium"],["mat-icon-button","",3,"tabIndex","click"],[1,"text-current",3,"svgIcon"],[1,"flex","flex-col","flex-0","items-start","w-full","p-6","sm:p-8","space-y-6","overflow-y-auto",3,"formGroup"],[1,"w-full",3,"subscriptSizing"],["matInput","","cdkTextareaAutosize","",3,"formControlName","rows","cdkAutosizeMinRows"],[1,"font-medium"],[1,"relative","flex","items-center","mt-1.5","px-4","leading-9","rounded-full","cursor-pointer",3,"ngClass","click"],[1,"icon-size-5","text-current",3,"svgIcon"],[1,"ml-2","text-md","font-medium"],[4,"ngIf"],[1,"fuse-mat-dense","invisible","absolute","inset-0","-mt-2.5","opacity-0","pointer-events-none",3,"subscriptSizing"],["matInput","",3,"formControlName","matDatepicker"],["dueDatePicker",""],["mat-button","","matDatepickerCancel","",3,"click"],["mat-flat-button","","matDatepickerApply","",3,"color"],[1,"w-full"],[1,"mt-1","rounded-md","border","border-gray-300","shadow-sm","overflow-hidden"],[1,"flex","items-center","my-2","mx-3"],[1,"flex","items-center","flex-auto","min-w-0"],[1,"icon-size-5",3,"svgIcon"],["type","text","placeholder","Enter label name",1,"min-w-0","ml-2","py-1","border-0",3,"maxLength","input","keydown"],[1,"max-h-40","leading-none","overflow-y-auto","border-t"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","items-center","h-10","min-h-10","pl-1","pr-4",3,"color","checked","change"]],template:function(e,t){if(1&e){const s=i.EpF();i.TgZ(0,"div",0)(1,"div",1)(2,"div",2),i._uU(3,"Card"),i.qZA(),i.TgZ(4,"button",3),i.NdJ("click",function(){return t.matDialogRef.close()}),i._UZ(5,"mat-icon",4),i.qZA()(),i.TgZ(6,"form",5)(7,"mat-form-field",6)(8,"mat-label"),i._uU(9,"Title"),i.qZA(),i.TgZ(10,"textarea",7),i._uU(11,"            "),i.qZA()(),i.TgZ(12,"mat-form-field",6)(13,"mat-label"),i._uU(14,"Description"),i.qZA(),i.TgZ(15,"textarea",7),i._uU(16,"            "),i.qZA()(),i.TgZ(17,"div")(18,"div",8),i._uU(19,"Due date"),i.qZA(),i.TgZ(20,"div",9),i.NdJ("click",function(){i.CHM(s);const o=i.MAs(28);return i.KtG(o.open())}),i._UZ(21,"mat-icon",10),i.TgZ(22,"span",11),i.YNc(23,oi,3,4,"ng-container",12),i.YNc(24,ai,2,0,"ng-container",12),i.qZA(),i.TgZ(25,"mat-form-field",13),i._UZ(26,"input",14),i.TgZ(27,"mat-datepicker",null,15)(29,"mat-datepicker-actions")(30,"button",16),i.NdJ("click",function(){return t.cardForm.get("dueDate").setValue(null)}),i._uU(31," Clear "),i.qZA(),i.TgZ(32,"button",17),i._uU(33," Select "),i.qZA()()()()()(),i.TgZ(34,"div",18)(35,"div",8),i._uU(36,"Labels"),i.qZA(),i.TgZ(37,"div",19)(38,"div",20)(39,"div",21),i._UZ(40,"mat-icon",22),i.TgZ(41,"input",23),i.NdJ("input",function(o){return t.filterLabels(o)})("keydown",function(o){return t.filterLabelsInputKeyDown(o)}),i.qZA()()(),i.TgZ(42,"div",24),i.YNc(43,li,3,3,"ng-container",25),i.qZA()()()()()}if(2&e){const s=i.MAs(28);i.xp6(4),i.Q6J("tabIndex",-1),i.xp6(1),i.Q6J("svgIcon","heroicons_outline:x"),i.xp6(1),i.Q6J("formGroup",t.cardForm),i.xp6(1),i.Q6J("subscriptSizing","dynamic"),i.xp6(3),i.Q6J("formControlName","title")("rows",1)("cdkAutosizeMinRows",1),i.xp6(2),i.Q6J("subscriptSizing","dynamic"),i.xp6(3),i.Q6J("formControlName","description")("rows",1)("cdkAutosizeMinRows",1),i.xp6(5),i.Q6J("ngClass",i.kEZ(23,ci,!t.card.dueDate,t.card.dueDate&&!t.isOverdue(t.card.dueDate),t.card.dueDate&&t.isOverdue(t.card.dueDate))),i.xp6(1),i.Q6J("svgIcon","heroicons_solid:calendar"),i.xp6(2),i.Q6J("ngIf",t.card.dueDate),i.xp6(1),i.Q6J("ngIf",!t.card.dueDate),i.xp6(1),i.Q6J("subscriptSizing","dynamic"),i.xp6(1),i.Q6J("formControlName","dueDate")("matDatepicker",s),i.xp6(6),i.Q6J("color","primary"),i.xp6(8),i.Q6J("svgIcon","heroicons_solid:search"),i.xp6(1),i.Q6J("maxLength",50),i.xp6(2),i.Q6J("ngForOf",t.filteredLabels)("ngForTrackBy",t.trackByFn)}},dependencies:[I.lW,I.RK,jt.oG,O.Mq,O.hl,O.M5,O.dp,O.DK,vt.KE,vt.hX,Z.Hw,Wt.Nt,re.IC,v.mk,v.sg,v.O5,_._Y,_.Fj,_.JJ,_.JL,_.sg,_.u,v.uU],encapsulation:2,changeDetection:0});class X{constructor(e,t,s){this._activatedRoute=e,this._matDialog=t,this._router=s}ngOnInit(){this._matDialog.open(W,{autoFocus:!1}).afterClosed().subscribe(()=>{this._router.navigate(["./../.."],{relativeTo:this._activatedRoute})})}}X.\u0275fac=function(e){return new(e||X)(i.Y36(R.gz),i.Y36(bt.uw),i.Y36(R.F0))},X.\u0275cmp=i.Xpm({type:X,selectors:[["scrumboard-card"]],decls:1,vars:0,template:function(e,t){1&e&&i._uU(0,"SCRUMBOARD -> BOARDS -> LIST -> CARD\n")},encapsulation:2,changeDetection:0});const di=[{path:"",component:$,resolve:{boards:M}},{path:":boardId",component:j,resolve:{board:B},children:[{path:"card/:cardId",component:X,resolve:{card:U}}]}];class N{}N.\u0275fac=function(e){return new(e||N)},N.\u0275mod=i.oAB({type:N}),N.\u0275inj=i.cJS({providers:[{provide:A.sG,useValue:te}],imports:[R.Bz.forChild(di),Ce,I.ot,jt.p9,O.FA,bt.Is,vt.lN,Z.Ps,Wt.c,ke,rt.Tx,Ee.Cv,Le.m]})}}]);